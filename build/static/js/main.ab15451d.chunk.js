(this["webpackJsonpnotes-front-end"]=this["webpackJsonpnotes-front-end"]||[]).push([[0],{213:function(e,t,a){e.exports=a(384)},218:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},257:function(e,t,a){},323:function(e,t,a){},367:function(e,t,a){},368:function(e,t,a){},369:function(e,t,a){},370:function(e,t,a){},371:function(e,t,a){},384:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(75),l=a.n(c),o=(a(218),a(19)),i=a.n(o),s=a(28),u=a(22),m=a(24),d=a(27),p=a(402),E=a(200),g=a(199),f=a(49),b=a(111),h=a(62),v=Object(n.createContext)(null);function O(){return Object(n.useContext)(v)}function w(e){var t=e.children,a=Object(h.a)(e,["children"]),n=Object(m.l)(),c=n.pathname,l=n.search,o=O().isAuthenticated;return r.a.createElement(m.d,a,o?t:r.a.createElement(m.c,{to:"/login?redirect=".concat(c).concat(l)}))}function I(e){var t=e.children,a=Object(h.a)(e,["children"]),n=O().isAuthenticated,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i"),n=a.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("redirect");return r.a.createElement(m.d,a,n?r.a.createElement(m.c,{to:""===c||null===c?"/":c}):t)}a(225);function j(){var e=O().isAuthenticated;return r.a.createElement("div",{className:"Home"},e?r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"Welcome!"),r.a.createElement("div",null,r.a.createElement(d.Link,{to:"/image/download",className:"btn btn-info btn-lg"},"Download Images"),r.a.createElement(d.Link,{to:"/image/upload",className:"btn btn-info btn-lg"},"Upload Images"))):r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"PLACEHOLDER"),r.a.createElement("p",null,"A placeholder title"),r.a.createElement("div",null,r.a.createElement(d.Link,{to:"/login",className:"btn btn-info btn-lg"},"Login"),r.a.createElement(d.Link,{to:"/signup",className:"btn btn-success btn-lg"},"Signup"))))}var y=a(392),k=a(393),S=a(403);function C(e){console.log(e);var t=e.toString();e instanceof Error||!e.message||(t=e.message),alert(t)}var x=a(89),L=a(79);function N(e){var t=Object(n.useState)(e),a=Object(u.a)(t,2),r=a[0],c=a[1];return[r,function(e){c(Object(L.a)(Object(L.a)({},r),{},Object(x.a)({},e.target.id,e.target.value)))}]}var T=a(391),_=a(183);a(226);function P(e){var t=e.isLoading,a=e.className,n=void 0===a?"":a,c=e.disabled,l=void 0!==c&&c,o=Object(h.a)(e,["isLoading","className","disabled"]);return r.a.createElement(T.a,Object.assign({className:"LoaderButton ".concat(n),disabled:l||t},o),t&&r.a.createElement(_.a,{glyph:"refresh",className:"spinning"}),o.children)}a(257);function A(){var e=O().userHasAuthenticated,t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],l=a[1],o=N({email:"",password:""}),m=Object(u.a)(o,2),d=m[0],p=m[1];function E(){return(E=Object(s.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),l(!0),t.prev=2,t.next=5,b.a.signIn(d.email,d.password);case 5:e(!0),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),C(t.t0),l(!1);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:function(e){return E.apply(this,arguments)}},r.a.createElement(y.a,{controlId:"email",bsSize:"large"},r.a.createElement(k.a,null,"Email"),r.a.createElement(S.a,{autofocus:!0,type:"email",value:d.email,onChange:p})),r.a.createElement(y.a,{controlId:"password",bsSize:"large"},r.a.createElement(k.a,null,"Password"),r.a.createElement(S.a,{value:d.password,onChange:p,type:"password"})),r.a.createElement(P,{block:!0,type:"submit",bsSize:"large",isLoading:c,disabled:!(d.email.length>0&&d.password.length>0)},"Login")))}var D=a(395),R=a(404),U=a(396),z=a(400),G=a(401),K=a(394);function B(e){var t=e.tags;if(console.log(e.tags),t){var a=t.map((function(e,t){return r.a.createElement("tbody",{key:t},r.a.createElement("tr",null,r.a.createElement("td",null,e)))}));return r.a.createElement(K.a,{striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Tags"))),a)}return r.a.createElement("h3",null,"No Tags")}function H(e){var t=e.items,a=Object.keys(t),n=Object.values(t),c=[],l=0;for(l=0;l<a.length;l++)c[l]=r.a.createElement("tbody",{key:l},r.a.createElement("tr",null,r.a.createElement("td",null,a[l]),r.a.createElement("td",null,n[l])));return r.a.createElement(K.a,{striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Key"),r.a.createElement("th",null,"Value"))),c)}a(323);function M(){var e=Object(m.m)().id,t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),d=Object(u.a)(o,2),p=d[0],E=d[1];return Object(n.useEffect)((function(){function t(){return z.a.get("notes","/images/".concat(e))}function a(){return(a=Object(s.a)(i.a.mark((function e(){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return a=e.sent,n=a.title,r=a.imgName,e.next=7,G.a.get(r,{level:"protected"});case 7:a.attatchmentURL=e.sent,E(n),l(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),C(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[e]),c&&console.log(c.tags),r.a.createElement("div",{className:"Images"},r.a.createElement("h1",null,p),r.a.createElement(D.a,{defaultActiveKey:"Image",id:"infoTabs"},r.a.createElement(R.a,{eventKey:"Image",title:"Image"},r.a.createElement(U.a,{src:c?c.attatchmentURL:"#"})),r.a.createElement(R.a,{eventKey:"tags",title:"Tags"},c?r.a.createElement(B,{tags:c.tags}):"Loading"),r.a.createElement(R.a,{eventKey:"metadata",title:"Metadata"},c?r.a.createElement(H,{items:c.metadata}):"Loading")))}var F=a(397);a(367);function W(){var e=N({email:"",password:"",confirmPassword:"",confirmationCode:""}),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(m.k)(),o=Object(n.useState)(null),d=Object(u.a)(o,2),p=d[0],E=d[1],g=O().userHasAuthenticated,f=Object(n.useState)(!1),h=Object(u.a)(f,2),v=h[0],w=h[1];function I(e){return j.apply(this,arguments)}function j(){return(j=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),e.prev=2,e.next=5,b.a.signUp({username:a.email,password:a.password});case 5:n=e.sent,w(!1),E(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),C(e.t0),w(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function x(e){return L.apply(this,arguments)}function L(){return(L=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),e.prev=2,e.next=5,b.a.confirmSignUp(a.email,a.confirmationCode);case 5:return e.next=7,b.a.signIn(a.email,a.password);case 7:g(!0),l.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),C(e.t0),w(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"Signup"},null===p?r.a.createElement("form",{onSubmit:I},r.a.createElement(y.a,{controlId:"email",bsSize:"large"},r.a.createElement(k.a,null,"Email"),r.a.createElement(S.a,{autoFocus:!0,type:"email",value:a.email,onChange:c})),r.a.createElement(y.a,{controlId:"password",bsSize:"large"},r.a.createElement(k.a,null,"Password"),r.a.createElement(S.a,{type:"password",value:a.password,onChange:c})),r.a.createElement(y.a,{controlId:"confirmPassword",bsSize:"large"},r.a.createElement(k.a,null,"Confirm Password"),r.a.createElement(S.a,{type:"password",onChange:c,value:a.confirmPassword})),r.a.createElement(P,{block:!0,type:"submit",bsSize:"large",isLoading:v,disabled:!(a.email.length>0&&a.password.length>0&&a.password===a.confirmPassword)},"Signup")):r.a.createElement("form",{onSubmit:x},r.a.createElement(y.a,{controlId:"confirmationCode",bsSize:"large"},r.a.createElement(k.a,null,"Confirmation Code"),r.a.createElement(S.a,{autoFocus:!0,type:"tel",onChange:c,value:a.confirmationCode}),r.a.createElement(F.a,null,"Please check your email for the code.")),r.a.createElement(P,{block:!0,type:"submit",bsSize:"large",isLoading:v,disabled:!(a.confirmationCode.length>0)},"Verify")))}a(368);function q(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Doh! Page not found!"))}var X=a(117),Y=a(398),V=a(399);a(369);function Z(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],l=O().isAuthenticated,o=Object(n.useState)(!0),m=Object(u.a)(o,2),d=m[0],p=m[1];function E(){return z.a.get("notes","/images")}return Object(n.useEffect)((function(){function e(){return(e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,E();case 5:t=e.sent,c(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),C(e.t0);case 12:p(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l]),r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"photos"},r.a.createElement(Y.a,null,"Images"),r.a.createElement(V.a,null,!d&&function(e){return[{}].concat(e).map((function(e,t){return 0!==t?r.a.createElement(f.LinkContainer,{key:e.imgId,to:"/image/".concat(e.imgId)},r.a.createElement(X.a,{header:e.title},"Created: "+new Date(e.createdAt).toLocaleString())):r.a.createElement(f.LinkContainer,{key:"new",to:"/image/upload"},r.a.createElement(X.a,null,r.a.createElement("h4",null,r.a.createElement("b",null,"\uff0b")," Upload a new Image")))}))}(a))))}function $(e){return J.apply(this,arguments)}function J(){return(J=Object(s.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(Date.now(),"-").concat(t.name),e.next=3,G.a.vault.put(a,t,{level:"protected",contentType:t.type});case 3:return n=e.sent,e.abrupt("return",n.key);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q="prod"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE?{s3:{REGION:"us-west-2",BUCKET:"notes-app-2-api-prod-attachmentsbucket-gdmu222gnqeg"},apiGateway:{REGION:"us-west-2",URL:"https://lbu9yishii.execute-api.us-west-2.amazonaws.com/prod"},cognito:{REGION:"us-west-2",USER_POOL_ID:"us-west-2_KRQlBFfk6",APP_CLIENT_ID:"2nm4944db8ps6jugovadsm9faj",IDENTITY_POOL_ID:"us-west-2:0a84d65d-20b2-4936-9d1c-8a7b1018ad76"}}:{s3:{REGION:"us-west-2",BUCKET:"crowdsourced-image-db-dev-attachmentsbucket-jvrdfg45ql7i"},apiGateway:{REGION:"us-west-2",URL:"https://xcio0v982k.execute-api.us-west-2.amazonaws.com/dev"},cognito:{REGION:"us-west-2",USER_POOL_ID:"us-west-2_CDeKAgfgH",APP_CLIENT_ID:"5oas5ccodf3gbcqlbtj8cjdmkv",IDENTITY_POOL_ID:"us-west-2:0aab714c-abd1-4933-9cc0-3f35d9b41897"}},ee=Object(L.a)({MAX_ATTATCHMENT_SIZE:5e6},Q),te=a(202),ae=a.n(te);a(370);function ne(){var e=Object(n.useRef)(null),t=Object(m.k)(),a=Object(n.useState)(""),c=Object(u.a)(a,2),l=c[0],o=c[1],d=Object(n.useState)(""),p=Object(u.a)(d,2),E=p[0],g=p[1],f=Object(n.useState)(!1),b=Object(u.a)(f,2),h=b[0],v=b[1];function O(){return(O=Object(s.a)(i.a.mark((function a(n){var r,c,o;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),!(e.current&&e.current.size>ee.MAX_ATTACHMENT_SIZE)){a.next=4;break}return alert("Please pick a file smaller than ".concat(ee.MAX_ATTACHMENT_SIZE/1e6," MB.")),a.abrupt("return");case 4:if(v(!0),a.prev=5,!e.current){a.next=12;break}return a.next=9,$(e.current);case 9:a.t0=a.sent,a.next=13;break;case 12:a.t0=null;case 13:return r=a.t0,c=ae()(e.current),o={size:c.EXIFwrapped.size,type:c.EXIFwrapped.type},a.next=18,w({title:l,attachment:r,metadata:o,tags:E});case 18:t.push("/"),a.next=25;break;case 21:a.prev=21,a.t1=a.catch(5),C(a.t1),v(!1);case 25:case"end":return a.stop()}}),a,null,[[5,21]])})))).apply(this,arguments)}function w(e){return console.log(e),z.a.post("notes","/images",{body:e})}return r.a.createElement("div",{className:"UploadImage"},r.a.createElement("form",{onSubmit:function(e){return O.apply(this,arguments)}},r.a.createElement(y.a,{controlId:"content"},r.a.createElement(k.a,null,"Title"),r.a.createElement(S.a,{value:l,type:"text",placeholder:"Image Title",onChange:function(e){return o(e.target.value)},required:!0})),r.a.createElement(y.a,null,r.a.createElement(k.a,null,"Tags"),r.a.createElement(S.a,{value:E,type:"text",placeholder:"Tag 1, Tag 2, Tag 3",onChange:function(e){return g(e.target.value)}})),r.a.createElement(y.a,{controlId:"file"},r.a.createElement(k.a,null,"Attachment"),r.a.createElement(S.a,{onChange:function(t){e.current=t.target.files[0]},type:"file",required:!0})),r.a.createElement(P,{block:!0,type:"submit",bsSize:"large",bsStyle:"primary",isLoading:h},"Create")))}function re(){return r.a.createElement(m.g,null,r.a.createElement(m.d,{exact:!0,path:"/"},r.a.createElement(j,null)),r.a.createElement(I,{exact:!0,path:"/login"},r.a.createElement(A,null)),r.a.createElement(I,{exact:!0,path:"/signup"},r.a.createElement(W,null)),r.a.createElement(w,{exact:!0,path:"/image/download"},r.a.createElement(Z,null)),r.a.createElement(w,{exact:!0,path:"/image/upload"},r.a.createElement(ne,null)),r.a.createElement(m.d,{exact:!0,path:"/image/:id"},console.log("route flag"),r.a.createElement(M,null)),r.a.createElement(m.d,null,r.a.createElement(q,null)))}a(371);var ce=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),o=Object(u.a)(l,2),h=o[0],O=o[1],w=Object(m.k)();function I(){return(I=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.currentSession();case 3:c(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),"No current user"!==e.t0&&alert(e.t0);case 9:O(!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function j(){return(j=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.signOut();case 2:c(!1),w.push("/login");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){I.apply(this,arguments)}()}),[]),!h&&r.a.createElement("div",{className:"App Container"},r.a.createElement(p.a,{fluid:!0,collapseOnSelect:!0},r.a.createElement(p.a.Header,null,r.a.createElement(p.a.Brand,null,r.a.createElement(d.Link,{to:"/"},"CSMIDB")),r.a.createElement(p.a.Toggle,null)),r.a.createElement(p.a.Collapse,null,r.a.createElement(E.a,{pullLeft:!0},r.a.createElement(f.LinkContainer,{to:"/image/upload"},r.a.createElement(g.a,{href:"/image/upload"},"Upload Images")),r.a.createElement(f.LinkContainer,{to:"/image/download"},r.a.createElement(g.a,{href:"/image/download"},"Download Images"))),r.a.createElement(E.a,{pullRight:!0},a?r.a.createElement(g.a,{onClick:function(){return j.apply(this,arguments)}},"Logout"):r.a.createElement(r.a.Fragment,null,r.a.createElement(f.LinkContainer,{to:"/signup"},r.a.createElement(g.a,{href:"/signup"},"Signup")),r.a.createElement(f.LinkContainer,{to:"/login"},r.a.createElement(g.a,{href:"/login"},"Login")))))),r.a.createElement(v.Provider,{value:{isAuthenticated:a,userHasAuthenticated:c}},r.a.createElement(re,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(53).a.configure({Auth:{mandatorySignIn:!0,region:ee.cognito.REGION,userPoolId:ee.cognito.USER_POOL_ID,identityPoolId:ee.cognito.IDENTITY_POOL_ID,userPoolWebClientId:ee.cognito.APP_CLIENT_ID},Storage:{region:ee.s3.REGION,bucket:ee.s3.BUCKET,identityPoolId:ee.cognito.IDENTITY_POOL_ID},API:{endpoints:[{name:"notes",endpoint:ee.apiGateway.URL,region:ee.apiGateway.REGION}]}}),l.a.render(r.a.createElement(d.BrowserRouter,null,r.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[213,1,2]]]);
//# sourceMappingURL=main.ab15451d.chunk.js.map