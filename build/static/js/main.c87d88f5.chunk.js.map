{"version":3,"sources":["libs/contextLib.js","components/AuthenticatedRoute.js","components/UnauthenticatedRoute.js","containers/Home.js","libs/errorLib.js","libs/hooksLib.js","components/LoaderButton.js","containers/Login.js","components/TagTable.js","components/MetadataTable.js","containers/CommentTab.js","containers/Images.js","containers/Signup.js","containers/NotFound.js","containers/ImageDisplay.js","containers/DownloadImages.js","libs/awsLib.js","config.js","containers/UploadImage.js","Routes.js","App.js","serviceWorker.js","index.js"],"names":["AppContext","createContext","useAppContext","useContext","AuthenticatedRoute","children","rest","useLocation","pathname","search","isAuthenticated","to","UnauthenticatedRoute","redirect","name","url","window","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","querystring","Home","className","onError","error","console","log","message","toString","Error","alert","useFormFields","initialState","useState","fields","setValues","event","target","id","value","LoaderButton","isLoading","disabled","props","Button","Glyphicon","glyph","Login","userHasAuthenticated","setIsLoading","email","password","handleFieldChange","a","preventDefault","Auth","signIn","onSubmit","FormGroup","controlId","bsSize","ControlLabel","FormControl","autofocus","type","onChange","block","length","TagTable","tags","tagsWrapped","map","tag","i","key","Table","striped","bordered","MetadataTable","items","keys","Object","values","tableValues","CommentTab","image","attatchmentURL","comments","show","setShow","handleClose","Image","src","renderImage","concat","comment","ListGroupItem","renderCommentsList","variant","onClick","Modal","onHide","backdrop","keyboard","Header","closeButton","Title","Body","Footer","Images","useParams","setImage","title","setTitle","useEffect","loadImage","API","get","imgName","Storage","level","onLoad","Tabs","defaultActiveKey","Tab","eventKey","metadata","Signup","confirmPassword","confirmationCode","history","useHistory","newUser","setNewUser","handleSubmit","signUp","username","handleConfirmationSubmit","confirmSignUp","push","autoFocus","HelpBlock","NotFound","ImageDisplay","images","toRender","rows","Math","ceil","imgList","forEach","element","arrayLoop","innerLoop","pop","renderRow","renderLast","renderRowFour","renderRowThree","renderRowTwo","renderRowOne","renderFull","DownloadImages","setImages","loadImages","item","imageName","s3Upload","file","filename","Date","now","vault","put","contentType","stored","config","process","REACT_APP_STAGE","s3","REGION","BUCKET","apiGateway","URL","cognito","USER_POOL_ID","APP_CLIENT_ID","IDENTITY_POOL_ID","MAX_ATTATCHMENT_SIZE","UploadImage","useRef","setTags","current","size","MAX_ATTACHMENT_SIZE","attachment","metadataFile","getExif","EXIFwrapped","createNote","note","post","body","placeholder","e","required","files","bsStyle","Routes","exact","path","App","isAuthenticating","setIsAuthenticating","currentSession","signOut","Navbar","fluid","collapseOnSelect","Brand","Toggle","Collapse","Nav","pullLeft","NavItem","pullRight","Provider","Boolean","hostname","match","Amplify","configure","mandatorySignIn","region","userPoolId","identityPoolId","userPoolWebClientId","bucket","endpoints","endpoint","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.c87d88f5.chunk.js","sourcesContent":["import {useContext, createContext} from 'react';\n\nexport const AppContext = createContext(null);\n\nexport function useAppContext() {\n    return useContext(AppContext)\n}","import React from 'react';\nimport { Route, Redirect, useLocation } from 'react-router-dom';\nimport { useAppContext } from \"../libs/contextLib\";\n\nexport default function AuthenticatedRoute({ children, ...rest }) {\n    const { pathname, search } = useLocation();\n    const { isAuthenticated } = useAppContext();\n\n    return (\n        <Route {...rest}>\n            {isAuthenticated ? (\n                children\n            ) : (\n                <Redirect to={\n                    `/login?redirect=${pathname}${search}`\n                } />\n            )}\n        </Route>\n    );\n}","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\nimport { useAppContext } from \"../libs/contextLib\";\n\nfunction querystring(name, url = window.location.href) {\n    name = name.replace(/[[]]/g, \"\\\\$&\");\n\n    const regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\", \"i\");\n    const results = regex.exec(url);\n\n    if (!results){\n        return null;\n    }\n    if (!results[2]) {\n        return \"\";\n    }\n\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\n\nexport default function UnauthenticatedRoute({ children, ...rest }) {\n    const { isAuthenticated } = useAppContext();\n    const redirect = querystring(\"redirect\");\n    return (\n        <Route {...rest}>\n            {!isAuthenticated ? (\n                children\n            ) : (\n                <Redirect to={redirect === \"\" || redirect === null ? '/' : redirect} />\n            )}\n        </Route>\n    );\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useAppContext } from \"../libs/contextLib\";\nimport \"./Home.css\";\n\n\nexport default function Home() {\n  const { isAuthenticated } = useAppContext();\n\n  function renderLander() {\n    return (\n      <div className=\"lander\">\n        <h1>PLACEHOLDER</h1>\n        <p>A placeholder title</p>\n        <div>\n          <Link to=\"/login\" className=\"btn btn-info btn-lg\">\n            Login\n          </Link>\n          <Link to=\"/signup\" className=\"btn btn-success btn-lg\">\n            Signup\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  function renderAuthenticatedLander() {\n    return (\n    <div className='lander'>\n      <h1>Welcome!</h1>\n      <div>\n        <Link to='/image/download' className=\"btn btn-info btn-lg\">\n          Download Images\n        </Link>\n        <Link to='/image/upload' className=\"btn btn-info btn-lg\">\n          Upload Images\n        </Link>\n      </div>  \n     </div>\n    );\n  }\n\n  return (\n    <div className=\"Home\">\n      {isAuthenticated ? renderAuthenticatedLander() : renderLander()}\n    </div>\n  );\n}","export function onError(error) {\n    console.log(error)\n    let message = error.toString();\n\n    if (!(error instanceof Error) && error.message) {\n        message = error.message;\n    }\n\n    alert(message);\n}","import {useState} from \"react\";\n\nexport function useFormFields(initialState) {\n    const [fields, setValues] = useState(initialState);\n\n    return [\n        fields,\n        function(event) {\n            setValues({\n                ...fields,\n                [event.target.id]: event.target.value\n            });\n        }\n    ];\n}","import React from 'react';\nimport {Button, Glyphicon} from \"react-bootstrap\"\nimport \"./LoaderButton.css\"\n\nexport default function LoaderButton({\n    isLoading,\n    className = '',\n    disabled = false,\n    ...props\n}) {\n    return (\n        <Button\n            className={`LoaderButton ${className}`}\n            disabled={disabled || isLoading}\n            {...props}\n        >\n            {isLoading && <Glyphicon glyph='refresh' className='spinning' />}\n            {props.children}\n        </Button>\n    );\n}","import React, {useState} from 'react';\nimport  {FormGroup, FormControl, ControlLabel} from \"react-bootstrap\";\nimport {Auth} from 'aws-amplify';\nimport {onError} from \"../libs/errorLib\";\nimport {useAppContext} from '../libs/contextLib';\nimport {useFormFields} from '../libs/hooksLib';\nimport LoaderButton from '../components/LoaderButton';\nimport './Login.css';\n\n\nexport default function Login() {\n    const {userHasAuthenticated} = useAppContext();\n    const [isLoading, setIsLoading] = useState(false);\n    const [fields, handleFieldChange] = useFormFields({\n        email: \"\",\n        password: \"\"\n    });\n\n    \n\n    function validateForm() {\n        return fields.email.length > 0 && fields.password.length > 0;\n    }\n\n    async function handleSubmit(event) {\n        event.preventDefault();\n\n        setIsLoading(true);\n\n        try {\n            await Auth.signIn(fields.email, fields.password);\n            userHasAuthenticated(true);\n        } catch (e) {\n            onError(e);\n            setIsLoading(false);\n        }\n    }\n\n    return (\n        <div className=\"Login\">\n            <form onSubmit={handleSubmit}>\n                <FormGroup controlId='email' bsSize='large'>\n                    <ControlLabel>Email</ControlLabel>\n                    <FormControl\n                        autofocus\n                        type='email'\n                        value={fields.email}\n                        onChange={handleFieldChange}\n                    />\n                </FormGroup>\n                <FormGroup controlId='password' bsSize='large'>\n                    <ControlLabel>Password</ControlLabel>\n                    <FormControl\n                        value={fields.password}\n                        onChange={handleFieldChange}\n                        type=\"password\"\n                    />\n                </FormGroup>\n                <LoaderButton \n                    block \n                    type='submit'\n                    bsSize='large' \n                    isLoading={isLoading}\n                    disabled={!validateForm()}\n                >\n                    Login\n                </LoaderButton>\n            </form>\n        </div>\n    )\n}","import React from 'react';\nimport { Table } from 'react-bootstrap';\n\n\nexport default function TagTable(props) {\n    const tags = props.tags;\n    console.log(props.tags);\n    if (tags) {\n        const tagsWrapped = tags.map((tag, i) => \n            <tbody key={i}>\n                <tr>\n                    <td>{tag}</td>  \n                </tr>\n            </tbody>\n        );\n\n        return (\n            <Table striped bordered>\n                <thead>\n                    <tr>\n                        <th>Tags</th>\n                    </tr>\n                </thead>\n                {tagsWrapped}\n                \n            </Table>\n        );\n    } else {\n        return <h3>No Tags</h3>\n    }\n    \n}","import React from 'react';\nimport { Table } from 'react-bootstrap';\n\n\nexport default function MetadataTable(props) {\n    const items = props.items;  \n    const keys = Object.keys(items);  \n    const values = Object.values(items);\n    const tableValues = [];\n    var i = 0;\n\n    for (i = 0; i < keys.length; i++) {\n        tableValues[i] = \n            <tbody key={i}>\n                <tr>\n                    <td>{keys[i]}</td>\n                    <td>{values[i]}</td>\n                </tr>\n            </tbody>\n    }\n\n    return (\n        <Table striped bordered>\n            <thead>\n                <tr>\n                    <th>Key</th>\n                    <th>Value</th>\n                </tr>\n            </thead>\n            {tableValues}\n        </Table>\n    );\n    \n}\n    ","import React, { useState } from 'react';\nimport { Image, Button, Modal, ListGroupItem, } from 'react-bootstrap';\nimport { API } from 'aws-amplify';\nimport \"./CommentTab.css\";\nimport { LinkContainer } from 'react-router-bootstrap';\n\n\n\n\nexport default function CommentTab(props) {\n    const { image } = props;\n    const { attatchmentURL, comments } = image;\n    const [show, setShow] = useState(false);\n\n    const handleClose = () => setShow(false);\n    const handleShow = () => setShow(true);\n\n    \n    function renderImage(attatchmentURL) {\n        return (\n            <div id=\"container\">\n                <Image id='commentImage' src={attatchmentURL}></Image>\n                <div id='commentBox'>\n    \n                </div>\n            </div>\n        );\n    }\n    \n    function renderCommentsList(comments) {\n        console.log(comments)\n        if (!comments) {\n            return <h3>No comments to display</h3>\n        } else {\n            return [].concat(comments).map((comment, i) =>\n                (\n                    <LinkContainer key={i} to='#'>\n                        <ListGroupItem>\n                            <h3>list placeholder</h3>\n                        </ListGroupItem>\n                    </LinkContainer>\n                    \n                )\n            );\n        }        \n    }\n    \n    return (\n        <>\n            <div id='left'>\n                { renderImage(attatchmentURL) }\n            </div>\n            <div id='right'>\n                { renderCommentsList(comments) }\n                <>\n                    <Button variant='primary' onClick={handleShow}>\n                        <b>{\"\\uFF0B\"}</b> Add a comment\n                    </Button>\n\n                    <Modal \n                        show={show} \n                        onHide={handleClose}\n                        backdrop=\"static\"\n                        keyboard={false}\n                    >\n                        <Modal.Header closeButton>\n                            <Modal.Title>Add a comment</Modal.Title>\n                        </Modal.Header>\n                        <Modal.Body>\n                            Add comment tech\n                        </Modal.Body>\n                        <Modal.Footer>\n                            <Button variant='secondary' onClick={handleClose}>\n                                Close\n                            </Button>\n                            <Button variant=\"primary\">Submit</Button>\n                        </Modal.Footer>\n                  </Modal>\n                </>\n            </div>\n        </>\n    );   \n}","import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Tabs, Tab, Image } from 'react-bootstrap';\nimport { API, Storage } from \"aws-amplify\";\nimport { onError } from \"../libs/errorLib\";\nimport TagTable from \"../components/TagTable\";\nimport MetadataTable from \"../components/MetadataTable\";\nimport CommentTab from \"../containers/CommentTab\";\nimport './Images.css';\n\n\nexport default function Images() {\n    const {id} = useParams();\n    const [image, setImage] = useState(null);\n    const [title, setTitle] = useState(\"\");\n\n    useEffect(() => {\n        \n        function loadImage() {\n            return API.get(\"notes\", `/images/${id}`);\n        }\n\n        async function onLoad() {\n            try {\n                const image = await loadImage();\n                const { title, imgName } = image;\n\n                image.attatchmentURL = await Storage.get(imgName, { level: 'public' });                \n\n                setTitle(title);\n                setImage(image);\n            } catch (e) {\n                onError(e);\n            }\n        }\n\n        onLoad();\n    }, [id]);   \n    \n    if(image){\n        console.log(image.tags);\n    }\n    \n\n    return (\n        <div className='Images'>\n            <h1>{title}</h1>\n            <Tabs defaultActiveKey='Image' id='infoTabs'>\n                <Tab eventKey='Image' title='Image'>\n                    <Image src={image ? image.attatchmentURL : '#'}></Image>\n                </Tab>\n\n                <Tab eventKey='tags' title='Tags'>\n                    {image ? <TagTable tags={image.tags} /> : \"Loading\"}\n                </Tab>\n\n                <Tab eventKey='metadata' title='Metadata'>\n                    {image ? <MetadataTable items={image.metadata} /> : \"Loading\"}\n                </Tab>\n\n                <Tab eventKey='comments' title='Comments'>\n                    {image ? <CommentTab image={image} /> : \"No Comments\"}\n                </Tab>\n            </Tabs>\n        </div>\n    );\n}","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Auth } from \"aws-amplify\";\nimport {\n  HelpBlock,\n  FormGroup,\n  FormControl,\n  ControlLabel\n} from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport { useAppContext } from \"../libs/contextLib\";\nimport { useFormFields } from \"../libs/hooksLib\";\nimport { onError } from \"../libs/errorLib\";\nimport \"./Signup.css\";\n\n\nexport default function Signup() {\n  const [fields, handleFieldChange] = useFormFields({\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n    confirmationCode: \"\",\n  });\n  const history = useHistory();\n  const [newUser, setNewUser] = useState(null);\n  const { userHasAuthenticated } = useAppContext();\n  const [isLoading, setIsLoading] = useState(false);\n\n  function validateForm() {\n    return (\n      fields.email.length > 0 &&\n      fields.password.length > 0 &&\n      fields.password === fields.confirmPassword\n    );\n  }\n\n  function validateConfirmationForm() {\n    return fields.confirmationCode.length > 0;\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    setIsLoading(true);\n    \n    try{\n        const newUser = await Auth.signUp({\n            username: fields.email,\n            password: fields.password,\n        });\n        setIsLoading(false);\n        setNewUser(newUser);\n    } catch (e) {\n        onError(e);\n        setIsLoading(false);\n    }\n  }\n\n  async function handleConfirmationSubmit(event) {\n    event.preventDefault();\n\n    setIsLoading(true);\n\n    try {\n        await Auth.confirmSignUp(fields.email, fields.confirmationCode);\n        await Auth.signIn(fields.email, fields.password);\n\n        userHasAuthenticated(true);\n        history.push(\"/\");\n    } catch (e) {\n        onError(e);\n        setIsLoading(false);\n    }\n  }\n\n  function renderConfirmationForm() {\n    return (\n      <form onSubmit={handleConfirmationSubmit}>\n        <FormGroup controlId=\"confirmationCode\" bsSize=\"large\">\n          <ControlLabel>Confirmation Code</ControlLabel>\n          <FormControl\n            autoFocus\n            type=\"tel\"\n            onChange={handleFieldChange}\n            value={fields.confirmationCode}\n          />\n          <HelpBlock>Please check your email for the code.</HelpBlock>\n        </FormGroup>\n        <LoaderButton\n          block\n          type=\"submit\"\n          bsSize=\"large\"\n          isLoading={isLoading}\n          disabled={!validateConfirmationForm()}\n        >\n          Verify\n        </LoaderButton>\n      </form>\n    );\n  }\n\n  function renderForm() {\n    return (\n      <form onSubmit={handleSubmit}>\n        <FormGroup controlId=\"email\" bsSize=\"large\">\n          <ControlLabel>Email</ControlLabel>\n          <FormControl\n            autoFocus\n            type=\"email\"\n            value={fields.email}\n            onChange={handleFieldChange}\n          />\n        </FormGroup>\n        <FormGroup controlId=\"password\" bsSize=\"large\">\n          <ControlLabel>Password</ControlLabel>\n          <FormControl\n            type=\"password\"\n            value={fields.password}\n            onChange={handleFieldChange}\n          />\n        </FormGroup>\n        <FormGroup controlId=\"confirmPassword\" bsSize=\"large\">\n          <ControlLabel>Confirm Password</ControlLabel>\n          <FormControl\n            type=\"password\"\n            onChange={handleFieldChange}\n            value={fields.confirmPassword}\n          />\n        </FormGroup>\n        <LoaderButton\n          block\n          type=\"submit\"\n          bsSize=\"large\"\n          isLoading={isLoading}\n          disabled={!validateForm()}\n        >\n          Signup\n        </LoaderButton>\n      </form>\n    );\n  }\n\n  return (\n    <div className=\"Signup\">\n      {newUser === null ? renderForm() : renderConfirmationForm()}\n    </div>\n  );\n}","import React from 'react';\nimport \"./NotFound.css\";\n\nexport default function NotFound() {\n    return (\n        <div className=\"NotFound\">\n            <h3>Doh! Page not found!</h3>\n        </div>\n    );\n}","import React from 'react';\nimport { Image } from 'react-bootstrap';\n\n\nexport default function ImageDisplay(props) {\n    /*props.images should be formatted as follows\n    [\n        {\n            src: imgName, #for loading the image from S3\n            imgID: id, #For loading the image data/redirection\n            tags: [\n                tag1,\n                tag2\n                ]\n\n        },\n    ]\n    */\n   \n   const { images } = props;\n   const toRender = images.length;\n   const rows = Math.ceil(toRender/5);\n \n\n   const imgList = [];\n\n   console.log(\"Att render\");\n   console.log(toRender);\n   images.forEach(element => {\n       console.log(element);\n   });\n   console.log(rows);\n\n   for (var i = 0; i < rows; i++) {\n       imgList[i] = [];\n   }\n\n   for (var arrayLoop = 0; arrayLoop < rows; arrayLoop++) {\n       for (var innerLoop = 0; innerLoop < 5; innerLoop++) {\n            imgList[arrayLoop].push(images.pop());\n       }\n   }\n\n   //5 images (full)\n   function renderRow(images) {\n        console.log(\"att 5\");\n       \n        return (\n            <row>\n                <col><Image src={images[0].src} /></col>\n                <col><Image src={images[1].src} /></col>\n                <col><Image src={images[2].src} /></col>\n                <col><Image src={images[3].src} /></col>\n                <col><Image src={images[4].src} /></col>\n            </row>\n       );\n    }\n   //4\n    function renderRowFour(images) {\n        console.log(\"att 4\");\n\n        return (\n            <row>\n                <col><Image src={images[0].src} /></col>\n                <col><Image src={images[1].src} /></col>\n                <col><Image src={images[2].src} /></col>\n                <col><Image src={images[3].src} /></col>\n                <col></col>\n            </row>\n        );\n    }\n    //3\n    function renderRowThree(images) {\n        console.log(\"att 3\");\n\n        return (\n            <row>\n                <col><Image src={images[0].src} /></col>\n                <col><Image src={images[1].src} /></col>\n                <col><Image src={images[2].src} /></col>\n                <col></col>\n                <col></col>\n            </row>\n        );\n    }\n    //2\n    function renderRowTwo(images) {\n        console.log(\"att 2\");\n\n        return (\n            <row>\n                <col><Image src={images[0].src} /></col>\n                <col><Image src={images[1].src} /></col>\n                <col></col>\n                <col></col>\n                <col></col>\n            </row>\n        );\n    }\n    //1\n    function renderRowOne(images) {\n        console.log(\"att 1\");\n\n        return (\n            <row>\n                <col><Image src={images[0].src} /></col>\n                <col></col>\n                <col></col>\n                <col></col>\n                <col></col>\n            </row>\n        );\n    }\n\n    function renderLast() {\n        switch(images.length) {\n            case 4:\n                renderRowFour();\n                break;\n            case 3:\n                renderRowThree();\n                break;\n            case 2:\n                renderRowTwo();\n                break;\n            case 1: \n                renderRowOne();\n                break;\n            default:\n                return null;\n            \n        }\n    }\n\n    function renderFull() {\n       for (var i = 0; i < rows; i++){\n           console.log(\"Rendering a full row!\")\n           renderRow(imgList[i]);\n       }\n       renderLast()\n       console.log(\"Done rendering\")\n    }\n\n    \n\n       \n    return renderFull();\n   \n\n\n\n\n}","import React, { useState, useEffect } from 'react';\nimport { useAppContext } from \"../libs/contextLib\";\nimport \"./DownloadImages.css\";\nimport { onError } from '../libs/errorLib';\nimport { API, Storage } from 'aws-amplify';\nimport ImageDisplay from './ImageDisplay';\n\n\nexport default function DownloadImages() {\n    const [images, setImages] = useState([]);\n    const {isAuthenticated} = useAppContext();\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        async function onLoad() {\n            if(!isAuthenticated) {\n                return;\n            }\n\n            try {\n                const images = await loadImages();\n                setImages(images);\n            } catch (e) {\n                onError(e);\n            }\n\n            setIsLoading(false);\n        }\n\n        onLoad();\n    }, [isAuthenticated]);\n\n    async function loadImages() {\n        const images = await API.get(\"notes\", \"/images\")\n        images.forEach(async item => {\n            item.src = await Storage.get(item.imageName, { level: 'public' });\n        });\n        console.log(images);\n\n        return images;\n    }\n\n    function renderList() {\n        console.log(\"Rendering!\");\n        return <ImageDisplay images={images} />\n    }\n    \n    \n    console.log(\"Att rendering of img list thru r\")\n    console.log(images);\n    return (\n        !isLoading && renderList()\n    );\n    \n\n}","import { Storage } from \"aws-amplify\";\n\nexport async function s3Upload(file) {\n  const filename = `${Date.now()}-${file.name}`;\n\n  const stored = await Storage.vault.put(filename, file, {\n    level: 'protected',\n    contentType: file.type,\n  });\n\n  return stored.key;\n}","const dev = {\n    s3: {\n        REGION: 'us-west-2',\n        BUCKET: 'crowdsourced-image-db-dev-attachmentsbucket-jvrdfg45ql7i'\n    },\n    apiGateway: {\n        REGION: 'us-west-2',\n        URL: 'https://xcio0v982k.execute-api.us-west-2.amazonaws.com/dev'\n    },\n    cognito: {\n        REGION: 'us-west-2',\n        USER_POOL_ID: 'us-west-2_CDeKAgfgH',\n        APP_CLIENT_ID: '5oas5ccodf3gbcqlbtj8cjdmkv',\n        IDENTITY_POOL_ID: 'us-west-2:0aab714c-abd1-4933-9cc0-3f35d9b41897'\n    }\n};\n\nconst prod = {\n    s3: {\n        REGION: 'us-west-2',\n        BUCKET: 'notes-app-2-api-prod-attachmentsbucket-gdmu222gnqeg'\n    },\n    apiGateway: {\n        REGION: 'us-west-2',\n        URL: 'https://lbu9yishii.execute-api.us-west-2.amazonaws.com/prod'\n    },\n    cognito: {\n        REGION: 'us-west-2',\n        USER_POOL_ID: 'us-west-2_KRQlBFfk6',\n        APP_CLIENT_ID: '2nm4944db8ps6jugovadsm9faj',\n        IDENTITY_POOL_ID: 'us-west-2:0a84d65d-20b2-4936-9d1c-8a7b1018ad76'\n    }\n};\n\nconst config = process.env.REACT_APP_STAGE === 'prod'\n    ? prod\n    : dev;\n\n\nexport default {\n    MAX_ATTATCHMENT_SIZE: 5000000,\n    ...config\n};","import React, { useRef, useState } from \"react\";\nimport { API } from \"aws-amplify\";\nimport { useHistory } from \"react-router-dom\";\nimport {FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport { onError } from \"../libs/errorLib\";\nimport { s3Upload } from \"../libs/awsLib\";\nimport config from \"../config\";\nimport getExif from 'exif-js'\nimport \"./UploadImage.css\";\n\nexport default function UploadImage() {\n    const file = useRef(null);\n  const history = useHistory();\n  const [title, setTitle] = useState(\"\");\n  const [tags, setTags] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n\n  function handleFileChange(event) {\n    file.current = event.target.files[0];\n  }\n\n  /*\n  function validateTags() {\n      return true;\n  }\n  */\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    if (file.current && file.current.size > config.MAX_ATTACHMENT_SIZE) {\n      alert(\n        `Please pick a file smaller than ${\n          config.MAX_ATTACHMENT_SIZE / 1000000\n        } MB.`\n      );\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      const attachment = file.current ? await s3Upload(file.current) : null;\n      //scrub metadata here to avoid sending img file to REST and THEN to S3.\n      //Doing it here allows us to just send the metadata as is\n      const metadataFile = getExif(file.current);\n      const comments = [];\n      const metadata = {\n          size: metadataFile.EXIFwrapped.size,\n          type: metadataFile.EXIFwrapped.type\n    };\n\n\n      await createNote({ title, attachment, metadata, tags, comments });\n      history.push(\"/\");\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n\n  function createNote(note) {\n    console.log(note);\n\n    return API.post(\"notes\", \"/images\", {\n      body: note\n    });\n  }\n\n  return (\n    <div className=\"UploadImage\">\n      <form onSubmit={handleSubmit}>\n\n        <FormGroup controlId=\"content\">\n            <ControlLabel>Title</ControlLabel>\n            <FormControl\n                value={title}\n                type='text'\n                placeholder=\"Image Title\"\n                onChange={e => setTitle(e.target.value)}\n                required\n            />\n        </FormGroup>\n\n        <FormGroup>\n            <ControlLabel>Tags</ControlLabel>\n            <FormControl\n                value={tags}\n                type='text'\n                placeholder='Tag 1, Tag 2, Tag 3'\n                onChange={e => setTags(e.target.value)}\n            />\n        </FormGroup>\n\n        <FormGroup controlId=\"file\">\n          <ControlLabel>Attachment</ControlLabel>\n          <FormControl onChange={handleFileChange} type=\"file\" required/>\n        </FormGroup>\n\n        <LoaderButton\n          block\n          type=\"submit\"\n          bsSize=\"large\"\n          bsStyle=\"primary\"\n          isLoading={isLoading}\n        >\n          Create\n        </LoaderButton>\n\n      </form>\n    </div>\n  );\n}","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\n\nimport AuthenticatedRoute from \"./components/AuthenticatedRoute\";\nimport UnauthenticatedRoute from \"./components/UnauthenticatedRoute\";\n\nimport Home from \"./containers/Home\";\nimport Login from \"./containers/Login\";\nimport Images from \"./containers/Images\";\nimport Signup from \"./containers/Signup\";\nimport NotFound from \"./containers/NotFound\";\nimport DownloadImages from \"./containers/DownloadImages\";\nimport UploadImage from \"./containers/UploadImage\";\n\nexport default function Routes() {\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Home />\n      </Route>\n\n      <UnauthenticatedRoute exact path=\"/login\">\n        <Login />\n      </UnauthenticatedRoute>\n\n      <UnauthenticatedRoute exact path=\"/signup\">\n        <Signup />\n      </UnauthenticatedRoute>\n\n      <AuthenticatedRoute exact path=\"/image/download\">\n        <DownloadImages />\n      </AuthenticatedRoute>\n\n      <AuthenticatedRoute exact path=\"/image/upload\">\n        <UploadImage />\n      </AuthenticatedRoute>\n\n      <Route exact path=\"/image/:id\">\n        {console.log(\"route flag\")}\n        <Images />\n      </Route>\n\n      {/* catch all */}\n      <Route>\n        <NotFound />\n      </Route>\n      \n    </Switch>\n  );\n}","import React, {useState, useEffect} from 'react';\nimport {Link, useHistory} from \"react-router-dom\";\nimport {Nav, Navbar, NavItem} from \"react-bootstrap\";\nimport {LinkContainer} from 'react-router-bootstrap';\nimport {Auth} from 'aws-amplify'\nimport Routes from \"./Routes\"\nimport {AppContext} from \"./libs/contextLib\";\nimport './App.css';\n\nfunction App() {\n  const [isAuthenticated, userHasAuthenticated] = useState(false);\n  const [isAuthenticating, setIsAuthenticating] = useState(true);\n\n  const history = useHistory();\n  \n\n  useEffect(() => {\n    onLoad();\n  }, []);\n\n  async function onLoad() {\n    try {\n      await Auth.currentSession();\n      userHasAuthenticated(true);\n    } catch (e) {\n      if (e !== 'No current user') {\n        alert(e);\n      }\n    }\n\n    setIsAuthenticating(false);\n  }\n\n  async function handleLogout() {\n    await Auth.signOut();\n\n    userHasAuthenticated(false);\n\n    history.push('/login');\n  }\n  return (\n    !isAuthenticating &&\n    <div className=\"App Container\">\n      <Navbar fluid collapseOnSelect>\n        <Navbar.Header>\n          <Navbar.Brand>\n            <Link to='/'>CSMIDB</Link>\n          </Navbar.Brand>\n          <Navbar.Toggle />\n        </Navbar.Header>\n        <Navbar.Collapse>\n          <Nav pullLeft>\n            <LinkContainer to='/image/upload'>\n              <NavItem href='/image/upload'>Upload Images</NavItem>\n            </LinkContainer>\n            <LinkContainer to='/image/download'>\n              <NavItem href='/image/download'>Download Images</NavItem>\n            </LinkContainer>\n          </Nav>\n          <Nav pullRight>\n            {isAuthenticated\n              ? /*add my uploads section */<NavItem onClick={handleLogout}>Logout</NavItem>\n              : <>\n                  <LinkContainer to='/signup'>\n                    <NavItem href='/signup'>Signup</NavItem>\n                  </LinkContainer>\n                  <LinkContainer to='/login'>\n                    <NavItem href='/login'>Login</NavItem>\n                  </LinkContainer>\n                </>\n            }\n          </Nav>\n        </Navbar.Collapse>\n      </Navbar>\n      <AppContext.Provider value={{isAuthenticated, userHasAuthenticated}}>\n        <Routes />\n      </AppContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport {Amplify} from 'aws-amplify';\nimport config from './config';\n\n\nAmplify.configure({\n  Auth: {\n    mandatorySignIn: true,\n    region: config.cognito.REGION,\n    userPoolId: config.cognito.USER_POOL_ID,\n    identityPoolId: config.cognito.IDENTITY_POOL_ID,\n    userPoolWebClientId: config.cognito.APP_CLIENT_ID\n  },\n  Storage: {\n    region: config.s3.REGION,\n    bucket: config.s3.BUCKET,\n    identityPoolId: config.cognito.IDENTITY_POOL_ID\n  },\n  API: {\n    endpoints: [\n      {\n        name: \"notes\",\n        endpoint: config.apiGateway.URL,\n        region: config.apiGateway.REGION\n      },\n    ]\n  }\n});\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}