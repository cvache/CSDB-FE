(this["webpackJsonpnotes-front-end"]=this["webpackJsonpnotes-front-end"]||[]).push([[0],{226:function(e,t,a){e.exports=a(414)},231:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},270:function(e,t,a){},336:function(e,t,a){},362:function(e,t,a){},405:function(e,t,a){},406:function(e,t,a){},407:function(e,t,a){},408:function(e,t,a){},409:function(e,t,a){},414:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(36),l=a.n(c),o=(a(231),a(19)),s=a.n(o),i=a(27),u=a(23),m=a(25),d=a(28),p=a(432),E=a(213),g=a(212),f=a(58),b=a(125),h=a(65),v=Object(n.createContext)(null);function O(){return Object(n.useContext)(v)}function w(e){var t=e.children,a=Object(h.a)(e,["children"]),n=Object(m.l)(),c=n.pathname,l=n.search,o=O().isAuthenticated;return r.a.createElement(m.d,a,o?t:r.a.createElement(m.c,{to:"/login?redirect=".concat(c).concat(l)}))}function y(e){var t=e.children,a=Object(h.a)(e,["children"]),n=O().isAuthenticated,c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i"),n=a.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("redirect");return r.a.createElement(m.d,a,n?r.a.createElement(m.c,{to:""===c||null===c?"/":c}):t)}a(238);function j(){var e=O().isAuthenticated;return r.a.createElement("div",{className:"Home"},e?r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"Welcome!"),r.a.createElement("div",null,r.a.createElement(d.Link,{to:"/image/download",className:"btn btn-info btn-lg"},"Download Images"),r.a.createElement(d.Link,{to:"/image/upload",className:"btn btn-info btn-lg"},"Upload Images"))):r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"PLACEHOLDER"),r.a.createElement("p",null,"A placeholder title"),r.a.createElement("div",null,r.a.createElement(d.Link,{to:"/login",className:"btn btn-info btn-lg"},"Login"),r.a.createElement(d.Link,{to:"/signup",className:"btn btn-success btn-lg"},"Signup"))))}var I=a(422),k=a(423),S=a(433);function x(e){console.log(e);var t=e.toString();e instanceof Error||!e.message||(t=e.message),alert(t)}var C=a(94),L=a(83);function N(e){var t=Object(n.useState)(e),a=Object(u.a)(t,2),r=a[0],c=a[1];return[r,function(e){c(Object(L.a)(Object(L.a)({},r),{},Object(C.a)({},e.target.id,e.target.value)))}]}var T=a(421),_=a(196);a(239);function A(e){var t=e.isLoading,a=e.className,n=void 0===a?"":a,c=e.disabled,l=void 0!==c&&c,o=Object(h.a)(e,["isLoading","className","disabled"]);return r.a.createElement(T.a,Object.assign({className:"LoaderButton ".concat(n),disabled:l||t},o),t&&r.a.createElement(_.a,{glyph:"refresh",className:"spinning"}),o.children)}a(270);function P(){var e=O().userHasAuthenticated,t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],l=a[1],o=N({email:"",password:""}),m=Object(u.a)(o,2),d=m[0],p=m[1];function E(){return(E=Object(i.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),l(!0),t.prev=2,t.next=5,b.a.signIn(d.email,d.password);case 5:e(!0),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),x(t.t0),l(!1);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:function(e){return E.apply(this,arguments)}},r.a.createElement(I.a,{controlId:"email",bsSize:"large"},r.a.createElement(k.a,null,"Email"),r.a.createElement(S.a,{autofocus:!0,type:"email",value:d.email,onChange:p})),r.a.createElement(I.a,{controlId:"password",bsSize:"large"},r.a.createElement(k.a,null,"Password"),r.a.createElement(S.a,{value:d.password,onChange:p,type:"password"})),r.a.createElement(A,{block:!0,type:"submit",bsSize:"large",isLoading:c,disabled:!(d.email.length>0&&d.password.length>0)},"Login")))}var D=a(427),R=a(434),U=a(425),z=a(429),B=a(430),G=a(424);function H(e){var t=e.tags;if(console.log(e.tags),t){var a=t.map((function(e,t){return r.a.createElement("tbody",{key:t},r.a.createElement("tr",null,r.a.createElement("td",null,e)))}));return r.a.createElement(G.a,{striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Tags"))),a)}return r.a.createElement("h3",null,"No Tags")}function K(e){var t=e.items,a=Object.keys(t),n=Object.values(t),c=[],l=0;for(l=0;l<a.length;l++)c[l]=r.a.createElement("tbody",{key:l},r.a.createElement("tr",null,r.a.createElement("td",null,a[l]),r.a.createElement("td",null,n[l])));return r.a.createElement(G.a,{striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Key"),r.a.createElement("th",null,"Value"))),c)}var F=a(426),M=a(431);a(336);function W(e){var t=e.image,a=t.attatchmentURL,c=t.comments,l=Object(n.useState)(!1),o=Object(u.a)(l,2),s=o[0],i=o[1],m=function(){return i(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"left"},function(e){return r.a.createElement("div",{id:"container"},r.a.createElement(U.a,{id:"commentImage",src:e}),r.a.createElement("div",{id:"commentBox"}))}(a)),r.a.createElement("div",{id:"right"},function(e){return console.log(e),e?[].concat(e).map((function(e,t){return r.a.createElement(f.LinkContainer,{key:t,to:"#"},r.a.createElement(F.a,null,r.a.createElement("h3",null,"list placeholder")))})):r.a.createElement("h3",null,"No comments to display")}(c),r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{variant:"primary",onClick:function(){return i(!0)}},r.a.createElement("b",null,"\uff0b")," Add a comment"),r.a.createElement(M.a,{show:s,onHide:m,backdrop:"static",keyboard:!1},r.a.createElement(M.a.Header,{closeButton:!0},r.a.createElement(M.a.Title,null,"Add a comment")),r.a.createElement(M.a.Body,null,"Add comment tech"),r.a.createElement(M.a.Footer,null,r.a.createElement(T.a,{variant:"secondary",onClick:m},"Close"),r.a.createElement(T.a,{variant:"primary"},"Submit"))))))}a(362);function q(){var e=Object(m.m)().id,t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),d=Object(u.a)(o,2),p=d[0],E=d[1];return Object(n.useEffect)((function(){function t(){return z.a.get("notes","/images/".concat(e))}function a(){return(a=Object(i.a)(s.a.mark((function e(){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return a=e.sent,n=a.title,r=a.imgName,e.next=7,B.a.get(r,{level:"public"});case 7:a.attatchmentURL=e.sent,E(n),l(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),x(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[e]),c&&console.log(c.tags),r.a.createElement("div",{className:"Images"},r.a.createElement("h1",null,p),r.a.createElement(D.a,{defaultActiveKey:"Image",id:"infoTabs"},r.a.createElement(R.a,{eventKey:"Image",title:"Image"},r.a.createElement(U.a,{src:c?c.attatchmentURL:"#"})),r.a.createElement(R.a,{eventKey:"tags",title:"Tags"},c?r.a.createElement(H,{tags:c.tags}):"Loading"),r.a.createElement(R.a,{eventKey:"metadata",title:"Metadata"},c?r.a.createElement(K,{items:c.metadata}):"Loading"),r.a.createElement(R.a,{eventKey:"comments",title:"Comments"},c?r.a.createElement(W,{image:c}):"No Comments")))}var X=a(428);a(405);function Y(){var e=N({email:"",password:"",confirmPassword:"",confirmationCode:""}),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(m.k)(),o=Object(n.useState)(null),d=Object(u.a)(o,2),p=d[0],E=d[1],g=O().userHasAuthenticated,f=Object(n.useState)(!1),h=Object(u.a)(f,2),v=h[0],w=h[1];function y(e){return j.apply(this,arguments)}function j(){return(j=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),e.prev=2,e.next=5,b.a.signUp({username:a.email,password:a.password});case 5:n=e.sent,w(!1),E(n),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),x(e.t0),w(!1);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function C(e){return L.apply(this,arguments)}function L(){return(L=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),e.prev=2,e.next=5,b.a.confirmSignUp(a.email,a.confirmationCode);case 5:return e.next=7,b.a.signIn(a.email,a.password);case 7:g(!0),l.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),x(e.t0),w(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"Signup"},null===p?r.a.createElement("form",{onSubmit:y},r.a.createElement(I.a,{controlId:"email",bsSize:"large"},r.a.createElement(k.a,null,"Email"),r.a.createElement(S.a,{autoFocus:!0,type:"email",value:a.email,onChange:c})),r.a.createElement(I.a,{controlId:"password",bsSize:"large"},r.a.createElement(k.a,null,"Password"),r.a.createElement(S.a,{type:"password",value:a.password,onChange:c})),r.a.createElement(I.a,{controlId:"confirmPassword",bsSize:"large"},r.a.createElement(k.a,null,"Confirm Password"),r.a.createElement(S.a,{type:"password",onChange:c,value:a.confirmPassword})),r.a.createElement(A,{block:!0,type:"submit",bsSize:"large",isLoading:v,disabled:!(a.email.length>0&&a.password.length>0&&a.password===a.confirmPassword)},"Signup")):r.a.createElement("form",{onSubmit:C},r.a.createElement(I.a,{controlId:"confirmationCode",bsSize:"large"},r.a.createElement(k.a,null,"Confirmation Code"),r.a.createElement(S.a,{autoFocus:!0,type:"tel",onChange:c,value:a.confirmationCode}),r.a.createElement(X.a,null,"Please check your email for the code.")),r.a.createElement(A,{block:!0,type:"submit",bsSize:"large",isLoading:v,disabled:!(a.confirmationCode.length>0)},"Verify")))}a(406);function V(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Doh! Page not found!"))}a(407);function Z(e){var t=e.images,a=t.length,n=Math.ceil(a/5),c=[];console.log("Att render"),console.log(a),t.forEach((function(e){console.log(e)})),console.log(n);for(var l=0;l<n;l++)c[l]=[];for(var o=0;o<n;o++)for(var s=0;s<5;s++)c[o].push(t.pop());function i(e){return console.log("att 5"),r.a.createElement("row",null,r.a.createElement("col",null,r.a.createElement(U.a,{src:e[0].src})),r.a.createElement("col",null,r.a.createElement(U.a,{src:e[1].src})),r.a.createElement("col",null,r.a.createElement(U.a,{src:e[2].src})),r.a.createElement("col",null,r.a.createElement(U.a,{src:e[3].src})),r.a.createElement("col",null,r.a.createElement(U.a,{src:e[4].src})))}function u(){switch(t.length){case 4:!function(e){console.log("att 4"),U.a,e[0].src,U.a,e[1].src,U.a,e[2].src,U.a,e[3].src}();break;case 3:!function(e){console.log("att 3"),U.a,e[0].src,U.a,e[1].src,U.a,e[2].src}();break;case 2:!function(e){console.log("att 2"),U.a,e[0].src,U.a,e[1].src}();break;case 1:!function(e){console.log("att 1"),U.a,e[0].src}();break;default:return null}}return function(){for(var e=0;e<n;e++)console.log("Rendering a full row!"),i(c[e]);u(),console.log("Done rendering")}()}function $(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],l=O().isAuthenticated,o=Object(n.useState)(!0),m=Object(u.a)(o,2),d=m[0],p=m[1];function E(){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("notes","/images");case 2:return(t=e.sent).forEach(function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.get(t.imageName,{level:"public"});case 2:t.src=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log(t),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,E();case 5:t=e.sent,c(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),x(e.t0);case 12:p(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l]),console.log("Att rendering of img list thru r"),console.log(a),!d&&(console.log("Rendering!"),r.a.createElement(Z,{images:a}))}function J(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(i.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(Date.now(),"-").concat(t.name),e.next=3,B.a.vault.put(a,t,{level:"protected",contentType:t.type});case 3:return n=e.sent,e.abrupt("return",n.key);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee="prod"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE?{s3:{REGION:"us-west-2",BUCKET:"notes-app-2-api-prod-attachmentsbucket-gdmu222gnqeg"},apiGateway:{REGION:"us-west-2",URL:"https://lbu9yishii.execute-api.us-west-2.amazonaws.com/prod"},cognito:{REGION:"us-west-2",USER_POOL_ID:"us-west-2_KRQlBFfk6",APP_CLIENT_ID:"2nm4944db8ps6jugovadsm9faj",IDENTITY_POOL_ID:"us-west-2:0a84d65d-20b2-4936-9d1c-8a7b1018ad76"}}:{s3:{REGION:"us-west-2",BUCKET:"crowdsourced-image-db-dev-attachmentsbucket-jvrdfg45ql7i"},apiGateway:{REGION:"us-west-2",URL:"https://xcio0v982k.execute-api.us-west-2.amazonaws.com/dev"},cognito:{REGION:"us-west-2",USER_POOL_ID:"us-west-2_CDeKAgfgH",APP_CLIENT_ID:"5oas5ccodf3gbcqlbtj8cjdmkv",IDENTITY_POOL_ID:"us-west-2:0aab714c-abd1-4933-9cc0-3f35d9b41897"}},te=Object(L.a)({MAX_ATTATCHMENT_SIZE:5e6},ee),ae=a(215),ne=a.n(ae);a(408);function re(){var e=Object(n.useRef)(null),t=Object(m.k)(),a=Object(n.useState)(""),c=Object(u.a)(a,2),l=c[0],o=c[1],d=Object(n.useState)(""),p=Object(u.a)(d,2),E=p[0],g=p[1],f=Object(n.useState)(!1),b=Object(u.a)(f,2),h=b[0],v=b[1];function O(){return(O=Object(i.a)(s.a.mark((function a(n){var r,c,o,i;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n.preventDefault(),!(e.current&&e.current.size>te.MAX_ATTACHMENT_SIZE)){a.next=4;break}return alert("Please pick a file smaller than ".concat(te.MAX_ATTACHMENT_SIZE/1e6," MB.")),a.abrupt("return");case 4:if(v(!0),a.prev=5,!e.current){a.next=12;break}return a.next=9,J(e.current);case 9:a.t0=a.sent,a.next=13;break;case 12:a.t0=null;case 13:return r=a.t0,c=ne()(e.current),o=[],i={size:c.EXIFwrapped.size,type:c.EXIFwrapped.type},a.next=19,w({title:l,attachment:r,metadata:i,tags:E,comments:o});case 19:t.push("/"),a.next=26;break;case 22:a.prev=22,a.t1=a.catch(5),x(a.t1),v(!1);case 26:case"end":return a.stop()}}),a,null,[[5,22]])})))).apply(this,arguments)}function w(e){return console.log(e),z.a.post("notes","/images",{body:e})}return r.a.createElement("div",{className:"UploadImage"},r.a.createElement("form",{onSubmit:function(e){return O.apply(this,arguments)}},r.a.createElement(I.a,{controlId:"content"},r.a.createElement(k.a,null,"Title"),r.a.createElement(S.a,{value:l,type:"text",placeholder:"Image Title",onChange:function(e){return o(e.target.value)},required:!0})),r.a.createElement(I.a,null,r.a.createElement(k.a,null,"Tags"),r.a.createElement(S.a,{value:E,type:"text",placeholder:"Tag 1, Tag 2, Tag 3",onChange:function(e){return g(e.target.value)}})),r.a.createElement(I.a,{controlId:"file"},r.a.createElement(k.a,null,"Attachment"),r.a.createElement(S.a,{onChange:function(t){e.current=t.target.files[0]},type:"file",required:!0})),r.a.createElement(A,{block:!0,type:"submit",bsSize:"large",bsStyle:"primary",isLoading:h},"Create")))}function ce(){return r.a.createElement(m.g,null,r.a.createElement(m.d,{exact:!0,path:"/"},r.a.createElement(j,null)),r.a.createElement(y,{exact:!0,path:"/login"},r.a.createElement(P,null)),r.a.createElement(y,{exact:!0,path:"/signup"},r.a.createElement(Y,null)),r.a.createElement(w,{exact:!0,path:"/image/download"},r.a.createElement($,null)),r.a.createElement(w,{exact:!0,path:"/image/upload"},r.a.createElement(re,null)),r.a.createElement(m.d,{exact:!0,path:"/image/:id"},console.log("route flag"),r.a.createElement(q,null)),r.a.createElement(m.d,null,r.a.createElement(V,null)))}a(409);var le=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),o=Object(u.a)(l,2),h=o[0],O=o[1],w=Object(m.k)();function y(){return(y=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.currentSession();case 3:c(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),"No current user"!==e.t0&&alert(e.t0);case 9:O(!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function j(){return(j=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.signOut();case 2:c(!1),w.push("/login");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){y.apply(this,arguments)}()}),[]),!h&&r.a.createElement("div",{className:"App Container"},r.a.createElement(p.a,{fluid:!0,collapseOnSelect:!0},r.a.createElement(p.a.Header,null,r.a.createElement(p.a.Brand,null,r.a.createElement(d.Link,{to:"/"},"CSMIDB")),r.a.createElement(p.a.Toggle,null)),r.a.createElement(p.a.Collapse,null,r.a.createElement(E.a,{pullLeft:!0},r.a.createElement(f.LinkContainer,{to:"/image/upload"},r.a.createElement(g.a,{href:"/image/upload"},"Upload Images")),r.a.createElement(f.LinkContainer,{to:"/image/download"},r.a.createElement(g.a,{href:"/image/download"},"Download Images"))),r.a.createElement(E.a,{pullRight:!0},a?r.a.createElement(g.a,{onClick:function(){return j.apply(this,arguments)}},"Logout"):r.a.createElement(r.a.Fragment,null,r.a.createElement(f.LinkContainer,{to:"/signup"},r.a.createElement(g.a,{href:"/signup"},"Signup")),r.a.createElement(f.LinkContainer,{to:"/login"},r.a.createElement(g.a,{href:"/login"},"Login")))))),r.a.createElement(v.Provider,{value:{isAuthenticated:a,userHasAuthenticated:c}},r.a.createElement(ce,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(55).a.configure({Auth:{mandatorySignIn:!0,region:te.cognito.REGION,userPoolId:te.cognito.USER_POOL_ID,identityPoolId:te.cognito.IDENTITY_POOL_ID,userPoolWebClientId:te.cognito.APP_CLIENT_ID},Storage:{region:te.s3.REGION,bucket:te.s3.BUCKET,identityPoolId:te.cognito.IDENTITY_POOL_ID},API:{endpoints:[{name:"notes",endpoint:te.apiGateway.URL,region:te.apiGateway.REGION}]}}),l.a.render(r.a.createElement(d.BrowserRouter,null,r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[226,1,2]]]);
//# sourceMappingURL=main.c87d88f5.chunk.js.map