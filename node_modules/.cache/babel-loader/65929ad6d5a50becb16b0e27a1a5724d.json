{"ast":null,"code":"var _jsxFileName = \"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/DownloadImages.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useAppContext } from \"../libs/contextLib\";\nimport { Link } from 'react-router-dom';\nimport \"./DownloadImages.css\";\nimport { Image } from 'react-bootstrap';\nimport { onError } from '../libs/errorLib';\nimport { API, Storage } from 'aws-amplify';\nexport default function DownloadImages() {\n  const [images, setImages] = useState([]);\n  const {\n    isAuthenticated\n  } = useAppContext();\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    async function onLoad() {\n      if (!isAuthenticated) {\n        return;\n      }\n\n      try {\n        const images = await loadImageInfo();\n        setImages(images);\n      } catch (e) {\n        onError(e);\n      }\n\n      console.log(\"Finished loading effects\");\n      setIsLoading(false);\n    }\n\n    onLoad();\n  }, [isAuthenticated]);\n\n  async function loadImageInfo() {\n    const initArr = await API.get(\"notes\", \"/images\");\n\n    for (const img of initArr) {\n      try {\n        const src = await Storage.get(img.imgName, {\n          level: 'public'\n        });\n        img.src = src;\n      } catch (e) {\n        onError(e);\n      }\n    }\n\n    return initArr;\n  }\n\n  async function asyncForEach(array, callback) {\n    for (let index = 0; index < array.length; index++) {\n      await callback(array[index], index, array);\n    }\n  }\n\n  function ezLoad() {\n    console.log(\"Attempted load\");\n    const buffer = images.map((image, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: i,\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Image, {\n        key: i,\n        src: image.src,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }\n      }));\n    });\n    console.log(buffer);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"buffer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }\n    }, buffer);\n  }\n  /*\n  function constructImageGrid() {\n      const buffer = [];\n      const imgList = [];\n      const rows = Math.ceil(images.length/5);\n       //seed the inital array like [[],[],[],[],[]]\n      for (var i = 0; i < rows; i++) {\n          imgList[i] = [];\n      }\n       //fill each inner array with 5 (or less) images\n      for (var arrayLoop = 0; arrayLoop < rows; arrayLoop++) {\n          for (var innerLoop = 0; innerLoop < 5; innerLoop++) {\n               imgList[arrayLoop].push(images.pop());\n          }\n      }\n       let counter = 0;\n      while (imgList.length !== 0) {\n          const singleList = imgList.pop()\n          console.log(singleList);\n          //fill so we have 5 in EVERY list\n          while (singleList.length < 5) {\n              singleList.push(null);\n          }\n          //serve as a small buffer to hold the 5 cols\n          const miniBuffer = []\n          for (var j = 0; j < 5; j++){\n              if (singleList[j]) {\n                  miniBuffer.push(\n                  <Col \n                  key={singleList[j].imgId}\n                  >\n                      <Image \n                      key={singleList[j].imgId + \"img\"} \n                      src={singleList[j] ? singleList[j].src : '#'} \n                      />\n                  </Col>\n                  );\n              } else {\n                  miniBuffer.push(<Col key={j + 'null'}></Col>)\n              }\n          }\n          console.log(miniBuffer);\n          buffer.push(<Row key={counter}>{miniBuffer}</Row>);\n          counter++;\n      }\n      console.log(buffer);\n       return <div>{buffer}</div>\n  }\n  */\n\n\n  async function getImgSrc(imgName) {\n    return await Storage.get(imgName, {\n      level: 'public'\n    });\n  }\n\n  console.log(\"Images: \");\n  console.log(images);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, images.map(d => /*#__PURE__*/React.createElement(Link, {\n    to: `/image/${d.imgId}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: d.src,\n    alt: \"loading...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }))));\n}","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/DownloadImages.js"],"names":["React","useState","useEffect","useAppContext","Link","Image","onError","API","Storage","DownloadImages","images","setImages","isAuthenticated","isLoading","setIsLoading","onLoad","loadImageInfo","e","console","log","initArr","get","img","src","imgName","level","asyncForEach","array","callback","index","length","ezLoad","buffer","map","image","i","getImgSrc","d","imgId"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAppContext } from \"../libs/contextLib\";\nimport { Link } from 'react-router-dom';\nimport \"./DownloadImages.css\";\nimport { Image } from 'react-bootstrap';\nimport { onError } from '../libs/errorLib';\nimport { API, Storage } from 'aws-amplify';\n\n\nexport default function DownloadImages() {\n    const [images, setImages] = useState([]);\n    const {isAuthenticated} = useAppContext();\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        async function onLoad() {\n            if(!isAuthenticated) {\n                return;\n            }\n\n            try {\n                const images = await loadImageInfo();\n                setImages(images);\n            } catch (e) {\n                onError(e);\n            }\n\n            console.log(\"Finished loading effects\")\n            setIsLoading(false);\n        }\n        \n\n        onLoad();\n    }, [isAuthenticated]);\n\n\n    async function loadImageInfo() {\n        const initArr = await API.get(\"notes\", \"/images\");\n        for (const img of initArr) {\n            try {\n                const src = await Storage.get(img.imgName, {level: 'public'});\n                img.src = src;\n            } catch (e) {\n                onError(e);\n            }\n            \n            \n        }\n        return initArr;\n    }\n\n    async function asyncForEach(array, callback) {\n        for (let index = 0; index < array.length; index++) {\n            await callback(array[index], index, array);\n        }\n    }\n\n    function ezLoad() {\n        console.log(\"Attempted load\");\n        const buffer = images.map((image, i) => {\n            return (\n                <div id={i} key={i}>\n                    <Image key={i} src={image.src} />\n                </div>\n            );\n        });\n\n        console.log(buffer);\n        return (\n            <div id='buffer'>\n                {buffer}\n            </div>\n        );\n    }\n    /*\n    function constructImageGrid() {\n        const buffer = [];\n        const imgList = [];\n        const rows = Math.ceil(images.length/5);\n\n        //seed the inital array like [[],[],[],[],[]]\n        for (var i = 0; i < rows; i++) {\n            imgList[i] = [];\n        }\n\n        //fill each inner array with 5 (or less) images\n        for (var arrayLoop = 0; arrayLoop < rows; arrayLoop++) {\n            for (var innerLoop = 0; innerLoop < 5; innerLoop++) {\n                 imgList[arrayLoop].push(images.pop());\n            }\n        }\n\n        let counter = 0;\n        while (imgList.length !== 0) {\n            const singleList = imgList.pop()\n            console.log(singleList);\n            //fill so we have 5 in EVERY list\n            while (singleList.length < 5) {\n                singleList.push(null);\n            }\n            //serve as a small buffer to hold the 5 cols\n            const miniBuffer = []\n            for (var j = 0; j < 5; j++){\n                if (singleList[j]) {\n                    miniBuffer.push(\n                    <Col \n                    key={singleList[j].imgId}\n                    >\n                        <Image \n                        key={singleList[j].imgId + \"img\"} \n                        src={singleList[j] ? singleList[j].src : '#'} \n                        />\n                    </Col>\n                    );\n                } else {\n                    miniBuffer.push(<Col key={j + 'null'}></Col>)\n                }\n            }\n            console.log(miniBuffer);\n            buffer.push(<Row key={counter}>{miniBuffer}</Row>);\n            counter++;\n        }\n        console.log(buffer);\n\n        return <div>{buffer}</div>\n    }\n    */\n\n    async function getImgSrc(imgName) {\n        return await Storage.get(imgName, {level: 'public'});\n    }\n\n    console.log(\"Images: \");\n    console.log(images);\n    return (\n        <>\n            {images.map(d => \n            <Link to={`/image/${d.imgId}`}>\n                <Image src={d.src} alt=\"loading...\"/>\n            </Link>)}\n        </>\n \n            \n    );\n}"]},"metadata":{},"sourceType":"module"}