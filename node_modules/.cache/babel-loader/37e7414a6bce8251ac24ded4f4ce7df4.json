{"ast":null,"code":"var _jsxFileName = \"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/Images.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Tabs, Tab } from 'react-bootstrap';\nimport { API, Storage } from \"aws-amplify\";\nimport { onError } from \"../libs/errorLib\";\nimport './Images.css';\nexport default function Images() {\n  const {\n    id\n  } = useParams();\n  const [image, setImage] = useState(null);\n  const [title, setTitle] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  console.log(\"id: \" + id);\n  useEffect(() => {\n    console.log('useEffect flag');\n\n    function loadImage() {\n      return API.get(\"notes\", `/images/${id}`);\n    }\n\n    async function onLoad() {\n      try {\n        const image = await loadImage();\n        const {\n          title,\n          imgName\n        } = image;\n        console.log(\"IMAGE:\");\n        console.log(image);\n        image.attatchmentURL = await Storage.get(imgName, {\n          level: 'protected'\n        });\n        console.log(\"AFTER GET:\");\n        console.log(image); //setIsLoading(false);\n\n        setTitle(title);\n        setImage(image);\n      } catch (e) {\n        onError(e);\n      }\n    }\n\n    onLoad();\n  }, [id]);\n  console.log(\"image: \" + image);\n\n  if (image != null) {\n    console.log(image.attatchmentURL);\n  }\n\n  function Image(props) {\n    const isLoading = props.isLoading;\n\n    if (!isLoading) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Images\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }\n      }, title), /*#__PURE__*/React.createElement(Tabs, {\n        defaultActiveKey: \"Image\",\n        id: \"infoTabs\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Tab, {\n        eventKey: \"Image\",\n        title: \"Image\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Image, {\n        src: image ? image.attatchmentURL : '#',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(Tab, {\n        eventKey: \"tags\",\n        title: \"Tags\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }\n      }, image ? image.tags : \"no Tags\"), /*#__PURE__*/React.createElement(Tab, {\n        eventKey: \"metadata\",\n        title: \"Metadata\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 29\n        }\n      }, \"Map of metadata\"))));\n    } else {\n      return /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }\n      }, \"Loading\");\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(Image, {\n    isLoading: isLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 12\n    }\n  });\n}","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/Images.js"],"names":["React","useState","useEffect","useParams","Tabs","Tab","API","Storage","onError","Images","id","image","setImage","title","setTitle","isLoading","setIsLoading","console","log","loadImage","get","onLoad","imgName","attatchmentURL","level","e","Image","props","tags"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Tabs, Tab } from 'react-bootstrap';\nimport { API, Storage } from \"aws-amplify\";\nimport { onError } from \"../libs/errorLib\";\nimport './Images.css';\n\n\nexport default function Images() {\n    const {id} = useParams();\n    const [image, setImage] = useState(null);\n    const [title, setTitle] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(false);\n\n    console.log(\"id: \" + id)\n    useEffect(() => {\n        console.log('useEffect flag')\n        \n        function loadImage() {\n            return API.get(\"notes\", `/images/${id}`);\n        }\n\n        async function onLoad() {\n            try {\n                const image = await loadImage();\n                const { title, imgName } = image;\n\n                console.log(\"IMAGE:\");\n                console.log(image);\n                \n                \n                image.attatchmentURL = await Storage.get(imgName, { level: 'protected' });\n\n                console.log(\"AFTER GET:\");\n                console.log(image);\n                \n                //setIsLoading(false);\n                setTitle(title);\n                setImage(image);\n            } catch (e) {\n                onError(e);\n            }\n        }\n\n        onLoad();\n    }, [id]);\n    \n\n    console.log(\"image: \" + image);\n    if (image != null){\n        console.log(image.attatchmentURL);\n    }\n\n    function Image(props) {\n        const isLoading = props.isLoading;\n        if (!isLoading) {\n            return (\n                <div className='Images'>\n                    <h1>{title}</h1>\n                    <Tabs defaultActiveKey='Image' id='infoTabs'>\n                        <Tab eventKey='Image' title='Image'>\n                            <Image src={image ? image.attatchmentURL : '#'}></Image>\n                        </Tab>\n\n                        <Tab eventKey='tags' title='Tags'>\n                            {image ? image.tags : \"no Tags\"}\n                        </Tab>\n\n                        <Tab eventKey='metadata' title='Metadata'>\n                            <h2>Map of metadata</h2>\n                        </Tab>\n                    </Tabs>\n                </div>\n            );\n        } else {\n            return (\n                <h3>Loading</h3>\n            );\n        }\n        \n    }\n\n    return <Image isLoading={isLoading} />;    \n\n}"]},"metadata":{},"sourceType":"module"}