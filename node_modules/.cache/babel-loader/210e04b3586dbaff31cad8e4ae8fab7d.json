{"ast":null,"code":"var _jsxFileName = \"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/DownloadImages.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useAppContext } from \"../libs/contextLib\";\nimport \"./DownloadImages.css\";\nimport { Image, Col, Row } from 'react-bootstrap';\nimport { onError } from '../libs/errorLib';\nimport { API, Storage } from 'aws-amplify';\nexport default function DownloadImages() {\n  const [images, setImages] = useState([]);\n  const {\n    isAuthenticated\n  } = useAppContext();\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    async function onLoad() {\n      if (!isAuthenticated) {\n        return;\n      }\n\n      try {\n        const images = await loadImageInfo();\n        setImages(images);\n      } catch (e) {\n        onError(e);\n      }\n\n      console.log(\"Finished loading\");\n      setIsLoading(false);\n    }\n\n    onLoad();\n  });\n\n  async function loadImageInfo() {\n    API.get(\"notes\", \"/images\").then(imageList => {\n      let len = imageList.length;\n      imageList.forEach(async item => {\n        Storage.get(item.imageName, {\n          level: 'public'\n        }).then(result => {\n          item.src = result;\n          console.log(item.src);\n          len--;\n\n          if (len === 0) {\n            console.log(\"TRIGGERED\");\n            return imageList;\n          }\n        }).catch(error => console.log(error.response));\n      });\n    }).catch(error => console.log(error.response));\n  }\n  /*\n  async function loadImageInfo() {\n          const imageList = await API.get(\"notes\", \"/images\");\n          let len = imageList.length;\n          imageList.forEach(async item => {\n              len--;\n              item.src = await Storage.get(item.imageName, { level: 'public' });\n              //console.log(item.src);\n          });\n          if (len === 0) {\n              console.log(\"even\");\n              return imageList;\n          }\n      }\n  */\n\n\n  function ezLoad() {\n    const buffer = images.map((image, i) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: i,\n        key: i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Image, {\n        key: i,\n        src: image ? image.src : '#',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }\n      }));\n    });\n    console.log(buffer);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"buffer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, buffer);\n  }\n\n  function constructImageGrid() {\n    const buffer = [];\n    const imgList = [];\n    const rows = Math.ceil(images.length / 5); //seed the inital array like [[],[],[],[],[]]\n\n    for (var i = 0; i < rows; i++) {\n      imgList[i] = [];\n    } //fill each inner array with 5 (or less) images\n\n\n    for (var arrayLoop = 0; arrayLoop < rows; arrayLoop++) {\n      for (var innerLoop = 0; innerLoop < 5; innerLoop++) {\n        imgList[arrayLoop].push(images.pop());\n      }\n    }\n\n    let counter = 0;\n\n    while (imgList.length !== 0) {\n      const singleList = imgList.pop();\n      console.log(singleList); //fill so we have 5 in EVERY list\n\n      while (singleList.length < 5) {\n        singleList.push(null);\n      } //serve as a small buffer to hold the 5 cols\n\n\n      const miniBuffer = [];\n\n      for (var j = 0; j < 5; j++) {\n        if (singleList[j]) {\n          miniBuffer.push( /*#__PURE__*/React.createElement(Col, {\n            key: singleList[j].imgId,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 21\n            }\n          }, /*#__PURE__*/React.createElement(Image, {\n            key: singleList[j].imgId + \"img\",\n            src: singleList[j] ? singleList[j].src : '#',\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 25\n            }\n          })));\n        } else {\n          miniBuffer.push( /*#__PURE__*/React.createElement(Col, {\n            key: j + 'null',\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 37\n            }\n          }));\n        }\n      }\n\n      console.log(miniBuffer);\n      buffer.push( /*#__PURE__*/React.createElement(Row, {\n        key: counter,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 25\n        }\n      }, miniBuffer));\n      counter++;\n    }\n\n    console.log(buffer);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 16\n      }\n    }, buffer);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainOut\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 18\n    }\n  }, ezLoad()));\n}\n/*\n    <Image \n    key={singleList[j].imgId + \"img\"} \n    src={singleList[j] ? singleList[j].src : '#'} \n    />\n    */","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/DownloadImages.js"],"names":["React","useState","useEffect","useAppContext","Image","Col","Row","onError","API","Storage","DownloadImages","images","setImages","isAuthenticated","isLoading","setIsLoading","onLoad","loadImageInfo","e","console","log","get","then","imageList","len","length","forEach","item","imageName","level","result","src","catch","error","response","ezLoad","buffer","map","image","i","constructImageGrid","imgList","rows","Math","ceil","arrayLoop","innerLoop","push","pop","counter","singleList","miniBuffer","j","imgId"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAppContext } from \"../libs/contextLib\";\nimport \"./DownloadImages.css\";\nimport { Image, Col, Row } from 'react-bootstrap';\nimport { onError } from '../libs/errorLib';\nimport { API, Storage } from 'aws-amplify';\n\n\nexport default function DownloadImages() {\n    const [images, setImages] = useState([]);\n    const {isAuthenticated} = useAppContext();\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        async function onLoad() {\n            if(!isAuthenticated) {\n                return;\n            }\n\n            try {\n                const images = await loadImageInfo();\n                setImages(images);\n            } catch (e) {\n                onError(e);\n            }\n\n            console.log(\"Finished loading\")\n            setIsLoading(false);\n        }\n        \n\n        onLoad();\n    });\n\n    async function loadImageInfo() {\n        API.get(\"notes\", \"/images\")\n        .then(imageList => {\n            let len = imageList.length;\n            imageList.forEach(async item => {\n                Storage.get(item.imageName, { level: 'public' })\n                .then(result => {\n                    item.src = result;\n                    console.log(item.src);\n                    len--;\n                    if (len === 0){\n                        console.log(\"TRIGGERED\");\n                        return imageList;\n                    }\n                })\n                .catch(error => console.log(error.response))\n            });\n        })\n        .catch(error => console.log(error.response));        \n    }\n    /*\n    async function loadImageInfo() {\n            const imageList = await API.get(\"notes\", \"/images\");\n            let len = imageList.length;\n            imageList.forEach(async item => {\n                len--;\n                item.src = await Storage.get(item.imageName, { level: 'public' });\n                //console.log(item.src);\n            });\n            if (len === 0) {\n                console.log(\"even\");\n                return imageList;\n            }\n        }\n    */\n    function ezLoad() {\n        const buffer = images.map((image, i) => {\n            return (\n                <div id={i} key={i}>\n                    <Image key={i} src={image ? image.src : '#'} />\n                </div>\n            );\n        });\n\n        console.log(buffer);\n        return (\n            <div id='buffer'>\n                {buffer}\n            </div>\n        );\n    }\n    \n    function constructImageGrid() {\n        const buffer = [];\n        const imgList = [];\n        const rows = Math.ceil(images.length/5);\n\n        //seed the inital array like [[],[],[],[],[]]\n        for (var i = 0; i < rows; i++) {\n            imgList[i] = [];\n        }\n\n        //fill each inner array with 5 (or less) images\n        for (var arrayLoop = 0; arrayLoop < rows; arrayLoop++) {\n            for (var innerLoop = 0; innerLoop < 5; innerLoop++) {\n                 imgList[arrayLoop].push(images.pop());\n            }\n        }\n\n        let counter = 0;\n        while (imgList.length !== 0) {\n            const singleList = imgList.pop()\n            console.log(singleList);\n            //fill so we have 5 in EVERY list\n            while (singleList.length < 5) {\n                singleList.push(null);\n            }\n            //serve as a small buffer to hold the 5 cols\n            const miniBuffer = []\n            for (var j = 0; j < 5; j++){\n                if (singleList[j]) {\n                    miniBuffer.push(\n                    <Col \n                    key={singleList[j].imgId}\n                    >\n                        <Image \n                        key={singleList[j].imgId + \"img\"} \n                        src={singleList[j] ? singleList[j].src : '#'} \n                        />\n                    </Col>\n                    );\n                } else {\n                    miniBuffer.push(<Col key={j + 'null'}></Col>)\n                }\n            }\n            console.log(miniBuffer);\n            buffer.push(<Row key={counter}>{miniBuffer}</Row>);\n            counter++;\n        }\n        console.log(buffer);\n\n        return <div>{buffer}</div>\n    }\n    \n    return (\n        <div>\n            {isLoading ? (\n                <div>Loading...</div>\n            ) : (<div className='mainOut'>\n                {ezLoad()}\n                </div>\n            )}\n        </div>\n            \n    );\n    \n\n}\n\n/*\n    <Image \n    key={singleList[j].imgId + \"img\"} \n    src={singleList[j] ? singleList[j].src : '#'} \n    />\n    */"]},"metadata":{},"sourceType":"module"}