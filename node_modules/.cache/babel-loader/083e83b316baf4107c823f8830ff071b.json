{"ast":null,"code":"import _regeneratorRuntime from\"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{LinkContainer}from\"react-router-bootstrap\";import{ListGroupItem,PageHeader,ListGroup}from\"react-bootstrap\";import{useAppContext}from\"../libs/contextLib\";import\"./DownloadImages.css\";import{onError}from'../libs/errorLib';import{API}from'aws-amplify';export default function DownloadImages(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),images=_useState2[0],setImages=_useState2[1];var _useAppContext=useAppContext(),isAuthenticated=_useAppContext.isAuthenticated;var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];useEffect(function(){function onLoad(){return _onLoad.apply(this,arguments);}function _onLoad(){_onLoad=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _images;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(isAuthenticated){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;_context.next=5;return loadImages();case 5:_images=_context.sent;setImages(_images);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);onError(_context.t0);case 12:setIsLoading(false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return _onLoad.apply(this,arguments);}onLoad();},[isAuthenticated]);function loadImages(){return API.get(\"notes\",\"/images\");}function renderPhotosList(images){return[{}].concat(images).map(function(image,i){return i!==0?/*#__PURE__*/React.createElement(LinkContainer,{key:image.imgId,to:\"/image/\".concat(image.imgId)},/*#__PURE__*/React.createElement(ListGroupItem,{header:image.title},\"Created: \"+new Date(image.createdAt).toLocaleString())):/*#__PURE__*/React.createElement(LinkContainer,{key:\"new\",to:\"/image/upload\"},/*#__PURE__*/React.createElement(ListGroupItem,null,/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(\"b\",null,\"\\uFF0B\"),\" Upload a new Image\")));});}function renderPhotos(){return/*#__PURE__*/React.createElement(\"div\",{className:\"photos\"},/*#__PURE__*/React.createElement(PageHeader,null,\"Images\"),/*#__PURE__*/React.createElement(ListGroup,null,!isLoading&&renderPhotosList(images)));}return/*#__PURE__*/React.createElement(\"div\",{className:\"home\"},renderPhotos());}","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/DownloadImages.js"],"names":["React","useState","useEffect","LinkContainer","ListGroupItem","PageHeader","ListGroup","useAppContext","onError","API","DownloadImages","images","setImages","isAuthenticated","isLoading","setIsLoading","onLoad","loadImages","get","renderPhotosList","concat","map","image","i","imgId","title","Date","createdAt","toLocaleString","renderPhotos"],"mappings":"ijBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,aAAT,KAA8B,wBAA9B,CACA,OAASC,aAAT,CAAwBC,UAAxB,CAAoCC,SAApC,KAAqD,iBAArD,CACA,OAASC,aAAT,KAA8B,oBAA9B,CACA,MAAO,sBAAP,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,OAASC,GAAT,KAAoB,aAApB,CAGA,cAAe,SAASC,CAAAA,cAAT,EAA0B,eACTT,QAAQ,CAAC,EAAD,CADC,wCAC9BU,MAD8B,eACtBC,SADsB,kCAEXL,aAAa,EAFF,CAE9BM,eAF8B,gBAE9BA,eAF8B,gBAGHZ,QAAQ,CAAC,IAAD,CAHL,yCAG9Ba,SAH8B,eAGnBC,YAHmB,eAKrCb,SAAS,CAAC,UAAM,SACGc,CAAAA,MADH,4HACZ,kJACQH,eADR,uGAM6BI,CAAAA,UAAU,EANvC,QAMcN,OANd,eAOQC,SAAS,CAACD,OAAD,CAAT,CAPR,+EASQH,OAAO,aAAP,CATR,QAYIO,YAAY,CAAC,KAAD,CAAZ,CAZJ,oEADY,yCAgBZC,MAAM,GACT,CAjBQ,CAiBN,CAACH,eAAD,CAjBM,CAAT,CAmBA,QAASI,CAAAA,UAAT,EAAsB,CAClB,MAAOR,CAAAA,GAAG,CAACS,GAAJ,CAAQ,OAAR,CAAiB,SAAjB,CAAP,CACH,CAED,QAASC,CAAAA,gBAAT,CAA0BR,MAA1B,CAAkC,CAC9B,MAAO,CAAC,EAAD,EAAKS,MAAL,CAAYT,MAAZ,EAAoBU,GAApB,CAAwB,SAACC,KAAD,CAAQC,CAAR,QAC3BA,CAAAA,CAAC,GAAK,CAAN,cACI,oBAAC,aAAD,EAAe,GAAG,CAAED,KAAK,CAACE,KAA1B,CAAiC,EAAE,kBAAYF,KAAK,CAACE,KAAlB,CAAnC,eACA,oBAAC,aAAD,EAAe,MAAM,CAAEF,KAAK,CAACG,KAA7B,EACC,YAAc,GAAIC,CAAAA,IAAJ,CAASJ,KAAK,CAACK,SAAf,EAA0BC,cAA1B,EADf,CADA,CADJ,cAOI,oBAAC,aAAD,EAAe,GAAG,CAAC,KAAnB,CAAyB,EAAE,CAAC,eAA5B,eACI,oBAAC,aAAD,mBACI,2CACI,6BAAI,QAAJ,CADJ,uBADJ,CADJ,CARuB,EAAxB,CAAP,CAiBH,CAED,QAASC,CAAAA,YAAT,EAAwB,CACpB,mBACI,2BAAK,SAAS,CAAC,QAAf,eACI,oBAAC,UAAD,eADJ,cAEI,oBAAC,SAAD,MACK,CAACf,SAAD,EAAcK,gBAAgB,CAACR,MAAD,CADnC,CAFJ,CADJ,CASH,CAGD,mBACI,2BAAK,SAAS,CAAC,MAAf,EACKkB,YAAY,EADjB,CADJ,CAKH","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { ListGroupItem, PageHeader, ListGroup } from \"react-bootstrap\";\nimport { useAppContext } from \"../libs/contextLib\";\nimport \"./DownloadImages.css\";\nimport { onError } from '../libs/errorLib';\nimport { API } from 'aws-amplify';\n\n\nexport default function DownloadImages() {\n    const [images, setImages] = useState([]);\n    const {isAuthenticated} = useAppContext();\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        async function onLoad() {\n            if(!isAuthenticated) {\n                return;\n            }\n\n            try {\n                const images = await loadImages();\n                setImages(images);\n            } catch (e) {\n                onError(e);\n            }\n\n            setIsLoading(false);\n        }\n\n        onLoad();\n    }, [isAuthenticated]);\n\n    function loadImages() {\n        return API.get(\"notes\", \"/images\")\n    }\n\n    function renderPhotosList(images) {\n        return [{}].concat(images).map((image, i) => \n            i !== 0 ? (\n                <LinkContainer key={image.imgId} to={`/image/${image.imgId}`}>\n                <ListGroupItem header={image.title}>\n                {\"Created: \" + new Date(image.createdAt).toLocaleString()}\n                </ListGroupItem>\n            </LinkContainer>\n            ) : (\n                <LinkContainer key='new' to=\"/image/upload\">\n                    <ListGroupItem>\n                        <h4>\n                            <b>{\"\\uFF0B\"}</b> Upload a new Image\n                        </h4>\n                    </ListGroupItem>\n                </LinkContainer>\n            )\n        );\n    }\n\n    function renderPhotos() {\n        return (\n            <div className='photos'>\n                <PageHeader>Images</PageHeader>\n                <ListGroup>\n                    {!isLoading && renderPhotosList(images)}\n                </ListGroup>\n\n            </div>\n        )\n    }\n    \n    \n    return (\n        <div className=\"home\">\n            {renderPhotos()}\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}