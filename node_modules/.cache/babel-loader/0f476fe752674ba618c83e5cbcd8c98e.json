{"ast":null,"code":"var _jsxFileName = \"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/DownloadImages.js\";\nimport React, { useState, useEffect, Suspense } from 'react';\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { PageHeader, ListGroup, Image, Row, Col } from \"react-bootstrap\";\nimport { useImage } from \"react-image\";\nimport { useAppContext } from \"../libs/contextLib\";\nimport \"./DownloadImages.css\";\nimport { onError } from '../libs/errorLib';\nimport { API, Storage } from 'aws-amplify';\nexport default function DownloadImages() {\n  const [images, setImages] = useState([]);\n  const {\n    isAuthenticated\n  } = useAppContext();\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    async function onLoad() {\n      if (!isAuthenticated) {\n        return;\n      }\n\n      try {\n        const images = await loadImages();\n        setImages(images);\n      } catch (e) {\n        onError(e);\n      }\n\n      setIsLoading(false);\n    }\n\n    onLoad();\n  }, [isAuthenticated]);\n\n  async function loadImages() {\n    const images = await API.get(\"notes\", \"/images\");\n    images.forEach(async item => {\n      item.imageFile = await Storage.get(item.imageName, {\n        level: 'protected'\n      });\n    });\n    console.log(images);\n    return images;\n  }\n\n  function renderPhotosList(images) {\n    const idealCols = 5;\n    const rows = Math.ceil(images.length / idealCols);\n    const imagesOut = [].concat(images.map((image, i) => /*#__PURE__*/React.createElement(ImageComponent, {\n      image: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }\n    })));\n    const fullRows = [];\n\n    for (var i = 0; i < rows; i++) {\n      fullRows.push( /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }\n      }, imagesOut.pop)));\n    }\n\n    return fullRows;\n  }\n\n  function ImageComponent(image) {\n    const {\n      src\n    } = useImage({\n      srcList: image.imageFile\n    });\n    return /*#__PURE__*/React.createElement(Image, {\n      src: src,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 16\n      }\n    });\n  }\n\n  function renderPhotos() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"photos\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(PageHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, \"Images\"), /*#__PURE__*/React.createElement(ListGroup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, !isLoading && renderPhotosList(images)));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, !isLoading && renderPhotos());\n}","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/DownloadImages.js"],"names":["React","useState","useEffect","Suspense","LinkContainer","PageHeader","ListGroup","Image","Row","Col","useImage","useAppContext","onError","API","Storage","DownloadImages","images","setImages","isAuthenticated","isLoading","setIsLoading","onLoad","loadImages","e","get","forEach","item","imageFile","imageName","level","console","log","renderPhotosList","idealCols","rows","Math","ceil","length","imagesOut","concat","map","image","i","fullRows","push","pop","ImageComponent","src","srcList","renderPhotos"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Suspense } from 'react';\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { PageHeader, ListGroup, Image, Row, Col } from \"react-bootstrap\";\nimport { useImage } from \"react-image\";\nimport { useAppContext } from \"../libs/contextLib\";\nimport \"./DownloadImages.css\";\nimport { onError } from '../libs/errorLib';\nimport { API, Storage } from 'aws-amplify';\n\n\nexport default function DownloadImages() {\n    const [images, setImages] = useState([]);\n    const {isAuthenticated} = useAppContext();\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        async function onLoad() {\n            if(!isAuthenticated) {\n                return;\n            }\n\n            try {\n                const images = await loadImages();\n                setImages(images);\n            } catch (e) {\n                onError(e);\n            }\n\n            setIsLoading(false);\n        }\n\n        onLoad();\n    }, [isAuthenticated]);\n\n    async function loadImages() {\n        const images = await API.get(\"notes\", \"/images\")\n        images.forEach(async item => {\n            item.imageFile = await Storage.get(item.imageName, { level: 'protected' });\n        });\n        console.log(images);\n\n        return images;\n    }\n\n    function renderPhotosList(images) {\n        const idealCols = 5;\n        const rows = Math.ceil(images.length/idealCols);\n\n        const imagesOut = [].concat(images.map((image, i) => \n            <ImageComponent image />\n        ));\n\n        const fullRows = []\n        for (var i = 0; i < rows; i++) {\n            fullRows.push(\n                <Row>\n                    <Col>{imagesOut.pop}</Col>\n                </Row>\n            );\n        }\n\n        return fullRows;\n    }\n\n    function ImageComponent(image) {\n        const {src} = useImage({\n          srcList: image.imageFile,\n        });\n       \n        return <Image src={src}  />\n      }\n\n    function renderPhotos() {\n        return (\n            <div className='photos'>\n                <PageHeader>Images</PageHeader>\n                <ListGroup>\n                    {!isLoading && renderPhotosList(images)}\n                </ListGroup>\n\n            </div>\n        )\n    }\n    \n    \n    return (\n        <div className=\"home\">\n            {!isLoading && renderPhotos()}\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}