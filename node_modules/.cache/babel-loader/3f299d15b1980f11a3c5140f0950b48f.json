{"ast":null,"code":"var _jsxFileName = \"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/DownloadImages.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useAppContext } from \"../libs/contextLib\";\nimport \"./DownloadImages.css\";\nimport { Image, Col, Row } from 'react-bootstrap';\nimport { onError } from '../libs/errorLib';\nimport { API, Storage } from 'aws-amplify';\nimport ImageDisplay from './ImageDisplay';\nexport default function DownloadImages() {\n  const [images, setImages] = useState([]);\n  const {\n    isAuthenticated\n  } = useAppContext();\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    async function onLoad() {\n      if (!isAuthenticated) {\n        return;\n      }\n\n      try {\n        const images = await loadImages();\n        setImages(images);\n      } catch (e) {\n        onError(e);\n      }\n\n      console.log(\"Finished loading\");\n      setIsLoading(false);\n    }\n\n    onLoad();\n  }, [isAuthenticated]);\n\n  async function loadImages() {\n    const imageList = await API.get(\"notes\", \"/images\");\n    imageList.forEach(async item => {\n      item.src = await Storage.get(item.imageName, {\n        level: 'public'\n      });\n    });\n    console.log(imageList);\n    return imageList;\n  }\n\n  function constructImageGrid() {\n    const buffer = [];\n    const imgList = [];\n    const rows = Math.ceil(images.length / 5); //seed the inital array like [[],[],[],[],[]]\n\n    for (var i = 0; i < rows; i++) {\n      imgList[i] = [];\n    } //fill each inner array with 5 (or less) images\n\n\n    for (var arrayLoop = 0; arrayLoop < rows; arrayLoop++) {\n      for (var innerLoop = 0; innerLoop < 5; innerLoop++) {\n        imgList[arrayLoop].push(images.pop());\n      }\n    }\n\n    while (imgList.length !== 0) {\n      const singleList = imgList.pop(); //fill so we have 5 in EVERY list\n\n      while (singleList.length < 5) {\n        singleList.push(null);\n      } //serve as a small buffer to hold the 5 cols\n\n\n      const miniBuffer = [];\n\n      for (var j = 0; j < 5; j++) {\n        miniBuffer.push( /*#__PURE__*/React.createElement(Col, {\n          key: singleList[i].imageName,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(Image, {\n          key: singleList[i].imageName,\n          src: singleList[i] ? singleList[i].src : '#',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 21\n          }\n        })));\n      }\n\n      buffer.push( /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }\n      }, miniBuffer));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 16\n      }\n    }, buffer);\n  }\n\n  function renderList() {\n    console.log(\"Rendering!\");\n    console.log(images[0].src);\n    return /*#__PURE__*/React.createElement(ImageDisplay, {\n      images: images,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 16\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, \"Loading...\") : constructImageGrid());\n} //create double nested array\n//inner arrays should be 5, the last one may be less.","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/DownloadImages.js"],"names":["React","useState","useEffect","useAppContext","Image","Col","Row","onError","API","Storage","ImageDisplay","DownloadImages","images","setImages","isAuthenticated","isLoading","setIsLoading","onLoad","loadImages","e","console","log","imageList","get","forEach","item","src","imageName","level","constructImageGrid","buffer","imgList","rows","Math","ceil","length","i","arrayLoop","innerLoop","push","pop","singleList","miniBuffer","j","renderList"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAppContext } from \"../libs/contextLib\";\nimport \"./DownloadImages.css\";\nimport { Image, Col, Row } from 'react-bootstrap';\nimport { onError } from '../libs/errorLib';\nimport { API, Storage } from 'aws-amplify';\nimport ImageDisplay from './ImageDisplay';\n\n\nexport default function DownloadImages() {\n    const [images, setImages] = useState([]);\n    const {isAuthenticated} = useAppContext();\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        async function onLoad() {\n            if(!isAuthenticated) {\n                return;\n            }\n\n            try {\n                const images = await loadImages();\n                setImages(images);\n            } catch (e) {\n                onError(e);\n            }\n\n            console.log(\"Finished loading\")\n            setIsLoading(false);\n        }\n\n        onLoad();\n    }, [isAuthenticated]);\n\n    async function loadImages() {\n        const imageList = await API.get(\"notes\", \"/images\")\n        imageList.forEach(async item => {\n            item.src = await Storage.get(item.imageName, { level: 'public' });\n        });\n        console.log(imageList);\n\n        return imageList;\n    }\n\n    function constructImageGrid() {\n        const buffer = [];\n        const imgList = [];\n        const rows = Math.ceil(images.length/5);\n\n        //seed the inital array like [[],[],[],[],[]]\n        for (var i = 0; i < rows; i++) {\n            imgList[i] = [];\n        }\n\n        //fill each inner array with 5 (or less) images\n        for (var arrayLoop = 0; arrayLoop < rows; arrayLoop++) {\n            for (var innerLoop = 0; innerLoop < 5; innerLoop++) {\n                 imgList[arrayLoop].push(images.pop());\n            }\n        }\n\n        while (imgList.length !== 0) {\n            const singleList = imgList.pop()\n            //fill so we have 5 in EVERY list\n            while (singleList.length < 5) {\n                singleList.push(null);\n            }\n            //serve as a small buffer to hold the 5 cols\n            const miniBuffer = []\n            for (var j = 0; j < 5; j++){\n                miniBuffer.push(\n                <Col \n                key={singleList[i].imageName}\n                >\n                    <Image \n                    key={singleList[i].imageName} \n                    src={singleList[i] ? singleList[i].src : '#'} \n                    />\n                </Col>\n                );\n            }\n            buffer.push(<Row>{miniBuffer}</Row>);\n        }\n\n        return <div>{buffer}</div>\n    }\n\n    function renderList() {\n        console.log(\"Rendering!\");\n        console.log(images[0].src);\n        return <ImageDisplay images={images} />\n    }\n    \n    \n    return (\n        <div>\n            {isLoading ? (\n                <div>Loading...</div>\n            ) : (\n                constructImageGrid()\n            )}\n        </div>\n            \n    );\n    \n\n}\n\n//create double nested array\n//inner arrays should be 5, the last one may be less."]},"metadata":{},"sourceType":"module"}