{"ast":null,"code":"var _jsxFileName = \"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/context/PhotoContext.js\";\nimport React, { createContext, useState } from 'react';\nimport { API, Storage } from 'aws-amplify';\nimport { onError } from '.src/libs/errorLib';\nexport const PhotoContext = createContext();\n\nconst PhotoContextProvider = props => {\n  const [images, setImages] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const runSearch = async query => {\n    const initArr = await API.get(\"notes\", \"/images\");\n\n    for (const img of initArr) {\n      try {\n        //TODO: if query isnt abong list of tags, remove from arr\n        const src = await Storage.get(img.imgName, {\n          level: 'public'\n        });\n        img.src = src;\n      } catch (e) {\n        onError(e);\n      }\n    }\n\n    setImages(initArr);\n    setLoading(false);\n  };\n\n  return /*#__PURE__*/React.createElement(PhotoContext.Provider, {\n    value: {\n      images,\n      loading,\n      runSearch\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 9\n    }\n  }, props.children);\n};\n\nexport default PhotoContextProvider;","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/context/PhotoContext.js"],"names":["React","createContext","useState","API","Storage","onError","PhotoContext","PhotoContextProvider","props","images","setImages","loading","setLoading","runSearch","query","initArr","get","img","src","imgName","level","e","children"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,QAA/B,QAA+C,OAA/C;AACA,SAASC,GAAT,EAAcC,OAAd,QAA6B,aAA7B;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,OAAO,MAAMC,YAAY,GAAGL,aAAa,EAAlC;;AAEP,MAAMM,oBAAoB,GAAGC,KAAK,IAAI;AAClC,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBR,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACS,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,IAAD,CAAtC;;AACA,QAAMW,SAAS,GAAG,MAAMC,KAAN,IAAe;AAC7B,UAAMC,OAAO,GAAG,MAAMZ,GAAG,CAACa,GAAJ,CAAQ,OAAR,EAAiB,SAAjB,CAAtB;;AACA,SAAK,MAAMC,GAAX,IAAkBF,OAAlB,EAA2B;AACvB,UAAI;AACA;AACA,cAAMG,GAAG,GAAG,MAAMd,OAAO,CAACY,GAAR,CAAYC,GAAG,CAACE,OAAhB,EAAyB;AAACC,UAAAA,KAAK,EAAE;AAAR,SAAzB,CAAlB;AACAH,QAAAA,GAAG,CAACC,GAAJ,GAAUA,GAAV;AACH,OAJD,CAIE,OAAOG,CAAP,EAAU;AACRhB,QAAAA,OAAO,CAACgB,CAAD,CAAP;AACH;AACJ;;AACDX,IAAAA,SAAS,CAACK,OAAD,CAAT;AACAH,IAAAA,UAAU,CAAC,KAAD,CAAV;AACH,GAbD;;AAcA,sBACI,oBAAC,YAAD,CAAc,QAAd;AAAuB,IAAA,KAAK,EAAE;AAAEH,MAAAA,MAAF;AAAUE,MAAAA,OAAV;AAAmBE,MAAAA;AAAnB,KAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKL,KAAK,CAACc,QADX,CADJ;AAKH,CAtBD;;AAwBA,eAAef,oBAAf","sourcesContent":["import React, { createContext, useState } from 'react';\nimport { API, Storage } from 'aws-amplify';\nimport { onError } from '.src/libs/errorLib';\nexport const PhotoContext = createContext();\n\nconst PhotoContextProvider = props => {\n    const [images, setImages] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const runSearch = async query => {\n        const initArr = await API.get(\"notes\", \"/images\");\n        for (const img of initArr) {\n            try {\n                //TODO: if query isnt abong list of tags, remove from arr\n                const src = await Storage.get(img.imgName, {level: 'public'});\n                img.src = src;\n            } catch (e) {\n                onError(e);\n            }\n        }\n        setImages(initArr);\n        setLoading(false);\n    }\n    return (\n        <PhotoContext.Provider value={{ images, loading, runSearch}}>\n            {props.children}\n        </PhotoContext.Provider>\n    );\n};\n\nexport default PhotoContextProvider;"]},"metadata":{},"sourceType":"module"}