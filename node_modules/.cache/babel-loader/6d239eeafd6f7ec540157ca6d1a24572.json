{"ast":null,"code":"import _regeneratorRuntime from\"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import{Tabs,Tab,Image}from'react-bootstrap';import{API,Storage}from\"aws-amplify\";import{onError}from\"../libs/errorLib\";import TagTable from\"../components/TagTable\";import MetadataTable from\"../components/MetadataTable\";import CommentTab from\"../containers/CommentTab\";import'./Images.css';export default function Images(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];useEffect(function(){function loadImage(){return API.get(\"notes\",\"/images/\".concat(id));}function onLoad(){return _onLoad.apply(this,arguments);}function _onLoad(){_onLoad=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _image,_title,imgName;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return loadImage();case 3:_image=_context.sent;_title=_image.title,imgName=_image.imgName;_context.next=7;return Storage.get(imgName,{level:'public'});case 7:_image.attatchmentURL=_context.sent;setTitle(_title);setImage(_image);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);onError(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return _onLoad.apply(this,arguments);}onLoad();},[id]);if(image){console.log(image.tags);}return/*#__PURE__*/React.createElement(\"div\",{className:\"Images\"},/*#__PURE__*/React.createElement(\"h1\",null,title),/*#__PURE__*/React.createElement(Tabs,{defaultActiveKey:\"Image\",id:\"infoTabs\"},/*#__PURE__*/React.createElement(Tab,{eventKey:\"Image\",title:\"Image\"},/*#__PURE__*/React.createElement(Image,{src:image?image.attatchmentURL:'#'})),/*#__PURE__*/React.createElement(Tab,{eventKey:\"tags\",title:\"Tags\"},image?/*#__PURE__*/React.createElement(TagTable,{tags:image.tags}):\"Loading\"),/*#__PURE__*/React.createElement(Tab,{eventKey:\"metadata\",title:\"Metadata\"},image?/*#__PURE__*/React.createElement(MetadataTable,{items:image.metadata}):\"Loading\"),/*#__PURE__*/React.createElement(Tab,{eventKey:\"comments\",title:\"Comments\"},image?/*#__PURE__*/React.createElement(CommentTab,{image:image}):\"No Comments\")));}","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/Images.js"],"names":["React","useState","useEffect","useParams","Tabs","Tab","Image","API","Storage","onError","TagTable","MetadataTable","CommentTab","Images","id","image","setImage","title","setTitle","loadImage","get","onLoad","imgName","level","attatchmentURL","console","log","tags","metadata"],"mappings":"ijBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,IAAT,CAAeC,GAAf,CAAoBC,KAApB,KAAiC,iBAAjC,CACA,OAASC,GAAT,CAAcC,OAAd,KAA6B,aAA7B,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,6BAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAO,cAAP,CAGA,cAAe,SAASC,CAAAA,MAAT,EAAkB,gBAChBV,SAAS,EADO,CACtBW,EADsB,YACtBA,EADsB,eAEHb,QAAQ,CAAC,IAAD,CAFL,wCAEtBc,KAFsB,eAEfC,QAFe,8BAGHf,QAAQ,CAAC,EAAD,CAHL,yCAGtBgB,KAHsB,eAGfC,QAHe,eAK7BhB,SAAS,CAAC,UAAM,CAEZ,QAASiB,CAAAA,SAAT,EAAqB,CACjB,MAAOZ,CAAAA,GAAG,CAACa,GAAJ,CAAQ,OAAR,mBAA4BN,EAA5B,EAAP,CACH,CAJW,QAMGO,CAAAA,MANH,4HAMZ,mMAE4BF,CAAAA,SAAS,EAFrC,QAEcJ,MAFd,eAGgBE,MAHhB,CAGmCF,MAHnC,CAGgBE,KAHhB,CAGuBK,OAHvB,CAGmCP,MAHnC,CAGuBO,OAHvB,uBAKqCd,CAAAA,OAAO,CAACY,GAAR,CAAYE,OAAZ,CAAqB,CAAEC,KAAK,CAAE,QAAT,CAArB,CALrC,QAKQR,MAAK,CAACS,cALd,eAOQN,QAAQ,CAACD,MAAD,CAAR,CACAD,QAAQ,CAACD,MAAD,CAAR,CARR,iFAUQN,OAAO,aAAP,CAVR,qEANY,yCAoBZY,MAAM,GACT,CArBQ,CAqBN,CAACP,EAAD,CArBM,CAAT,CAuBA,GAAGC,KAAH,CAAS,CACLU,OAAO,CAACC,GAAR,CAAYX,KAAK,CAACY,IAAlB,EACH,CAGD,mBACI,2BAAK,SAAS,CAAC,QAAf,eACI,8BAAKV,KAAL,CADJ,cAEI,oBAAC,IAAD,EAAM,gBAAgB,CAAC,OAAvB,CAA+B,EAAE,CAAC,UAAlC,eACI,oBAAC,GAAD,EAAK,QAAQ,CAAC,OAAd,CAAsB,KAAK,CAAC,OAA5B,eACI,oBAAC,KAAD,EAAO,GAAG,CAAEF,KAAK,CAAGA,KAAK,CAACS,cAAT,CAA0B,GAA3C,EADJ,CADJ,cAKI,oBAAC,GAAD,EAAK,QAAQ,CAAC,MAAd,CAAqB,KAAK,CAAC,MAA3B,EACKT,KAAK,cAAG,oBAAC,QAAD,EAAU,IAAI,CAAEA,KAAK,CAACY,IAAtB,EAAH,CAAoC,SAD9C,CALJ,cASI,oBAAC,GAAD,EAAK,QAAQ,CAAC,UAAd,CAAyB,KAAK,CAAC,UAA/B,EACKZ,KAAK,cAAG,oBAAC,aAAD,EAAe,KAAK,CAAEA,KAAK,CAACa,QAA5B,EAAH,CAA8C,SADxD,CATJ,cAaI,oBAAC,GAAD,EAAK,QAAQ,CAAC,UAAd,CAAyB,KAAK,CAAC,UAA/B,EACKb,KAAK,cAAG,oBAAC,UAAD,EAAY,KAAK,CAAEA,KAAnB,EAAH,CAAkC,aAD5C,CAbJ,CAFJ,CADJ,CAsBH","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Tabs, Tab, Image } from 'react-bootstrap';\nimport { API, Storage } from \"aws-amplify\";\nimport { onError } from \"../libs/errorLib\";\nimport TagTable from \"../components/TagTable\";\nimport MetadataTable from \"../components/MetadataTable\";\nimport CommentTab from \"../containers/CommentTab\";\nimport './Images.css';\n\n\nexport default function Images() {\n    const {id} = useParams();\n    const [image, setImage] = useState(null);\n    const [title, setTitle] = useState(\"\");\n\n    useEffect(() => {\n        \n        function loadImage() {\n            return API.get(\"notes\", `/images/${id}`);\n        }\n\n        async function onLoad() {\n            try {\n                const image = await loadImage();\n                const { title, imgName } = image;\n\n                image.attatchmentURL = await Storage.get(imgName, { level: 'public' });                \n\n                setTitle(title);\n                setImage(image);\n            } catch (e) {\n                onError(e);\n            }\n        }\n\n        onLoad();\n    }, [id]);   \n    \n    if(image){\n        console.log(image.tags);\n    }\n    \n\n    return (\n        <div className='Images'>\n            <h1>{title}</h1>\n            <Tabs defaultActiveKey='Image' id='infoTabs'>\n                <Tab eventKey='Image' title='Image'>\n                    <Image src={image ? image.attatchmentURL : '#'}></Image>\n                </Tab>\n\n                <Tab eventKey='tags' title='Tags'>\n                    {image ? <TagTable tags={image.tags} /> : \"Loading\"}\n                </Tab>\n\n                <Tab eventKey='metadata' title='Metadata'>\n                    {image ? <MetadataTable items={image.metadata} /> : \"Loading\"}\n                </Tab>\n\n                <Tab eventKey='comments' title='Comments'>\n                    {image ? <CommentTab image={image} /> : \"No Comments\"}\n                </Tab>\n            </Tabs>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}