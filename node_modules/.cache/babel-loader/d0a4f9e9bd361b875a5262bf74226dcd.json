{"ast":null,"code":"import _regeneratorRuntime from\"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useHistory}from\"react-router-dom\";import{Nav,Navbar,NavItem}from\"react-bootstrap\";import{LinkContainer}from'react-router-bootstrap';import{Auth}from'aws-amplify';import Routes from\"./Routes\";import{AppContext}from\"./libs/contextLib\";import'./App.css';function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAuthenticated=_useState2[0],userHasAuthenticated=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isAuthenticating=_useState4[0],setIsAuthenticating=_useState4[1];var history=useHistory();useEffect(function(){onLoad();},[]);function onLoad(){return _onLoad.apply(this,arguments);}function _onLoad(){_onLoad=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Auth.currentSession();case 3:userHasAuthenticated(true);_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);if(_context.t0!=='No current user'){alert(_context.t0);}case 9:setIsAuthenticating(false);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return _onLoad.apply(this,arguments);}function handleLogout(){return _handleLogout.apply(this,arguments);}function _handleLogout(){_handleLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Auth.signOut();case 2:userHasAuthenticated(false);history.push('/login');case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _handleLogout.apply(this,arguments);}return!isAuthenticating&&/*#__PURE__*/React.createElement(\"div\",{className:\"App Container\"},/*#__PURE__*/React.createElement(Navbar,{fluid:true,collapseOnSelect:true},/*#__PURE__*/React.createElement(Navbar.Header,null,/*#__PURE__*/React.createElement(Navbar.Brand,null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"CSMIDB\")),/*#__PURE__*/React.createElement(Navbar.Toggle,null)),/*#__PURE__*/React.createElement(Navbar.Collapse,null,/*#__PURE__*/React.createElement(Nav,{pullLeft:true},/*#__PURE__*/React.createElement(LinkContainer,{to:\"/image/upload\"},/*#__PURE__*/React.createElement(NavItem,{href:\"/image/upload\"},\"Upload Images\")),/*#__PURE__*/React.createElement(LinkContainer,{to:\"/image/download\"},/*#__PURE__*/React.createElement(NavItem,{href:\"/image/download\"},\"Download Images\"))),/*#__PURE__*/React.createElement(Nav,{pullRight:true},isAuthenticated?/*#__PURE__*/ /*add my uploads section */React.createElement(NavItem,{onClick:handleLogout},\"Logout\"):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(LinkContainer,{to:\"/signup\"},/*#__PURE__*/React.createElement(NavItem,{href:\"/signup\"},\"Signup\")),/*#__PURE__*/React.createElement(LinkContainer,{to:\"/login\"},/*#__PURE__*/React.createElement(NavItem,{href:\"/login\"},\"Login\")))))),/*#__PURE__*/React.createElement(AppContext.Provider,{value:{isAuthenticated:isAuthenticated,userHasAuthenticated:userHasAuthenticated}},/*#__PURE__*/React.createElement(Routes,null)));}export default App;","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/App.js"],"names":["React","useState","useEffect","Link","useHistory","Nav","Navbar","NavItem","LinkContainer","Auth","Routes","AppContext","App","isAuthenticated","userHasAuthenticated","isAuthenticating","setIsAuthenticating","history","onLoad","currentSession","alert","handleLogout","signOut","push"],"mappings":"ijBAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAAQC,IAAR,CAAcC,UAAd,KAA+B,kBAA/B,CACA,OAAQC,GAAR,CAAaC,MAAb,CAAqBC,OAArB,KAAmC,iBAAnC,CACA,OAAQC,aAAR,KAA4B,wBAA5B,CACA,OAAQC,IAAR,KAAmB,aAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OAAQC,UAAR,KAAyB,mBAAzB,CACA,MAAO,WAAP,CAEA,QAASC,CAAAA,GAAT,EAAe,eACmCX,QAAQ,CAAC,KAAD,CAD3C,wCACNY,eADM,eACWC,oBADX,8BAEmCb,QAAQ,CAAC,IAAD,CAF3C,yCAENc,gBAFM,eAEYC,mBAFZ,eAIb,GAAMC,CAAAA,OAAO,CAAGb,UAAU,EAA1B,CAGAF,SAAS,CAAC,UAAM,CACdgB,MAAM,GACP,CAFQ,CAEN,EAFM,CAAT,CAPa,QAWEA,CAAAA,MAXF,4HAWb,yKAEUT,CAAAA,IAAI,CAACU,cAAL,EAFV,QAGIL,oBAAoB,CAAC,IAAD,CAApB,CAHJ,8EAKI,GAAI,cAAM,iBAAV,CAA6B,CAC3BM,KAAK,aAAL,CACD,CAPL,OAUEJ,mBAAmB,CAAC,KAAD,CAAnB,CAVF,oEAXa,iDAwBEK,CAAAA,YAxBF,8IAwBb,+JACQZ,CAAAA,IAAI,CAACa,OAAL,EADR,QAGER,oBAAoB,CAAC,KAAD,CAApB,CAEAG,OAAO,CAACM,IAAR,CAAa,QAAb,EALF,wDAxBa,+CA+Bb,MACE,CAACR,gBAAD,eACA,2BAAK,SAAS,CAAC,eAAf,eACE,oBAAC,MAAD,EAAQ,KAAK,KAAb,CAAc,gBAAgB,KAA9B,eACE,oBAAC,MAAD,CAAQ,MAAR,mBACE,oBAAC,MAAD,CAAQ,KAAR,mBACE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,WADF,CADF,cAIE,oBAAC,MAAD,CAAQ,MAAR,MAJF,CADF,cAOE,oBAAC,MAAD,CAAQ,QAAR,mBACE,oBAAC,GAAD,EAAK,QAAQ,KAAb,eACE,oBAAC,aAAD,EAAe,EAAE,CAAC,eAAlB,eACE,oBAAC,OAAD,EAAS,IAAI,CAAC,eAAd,kBADF,CADF,cAIE,oBAAC,aAAD,EAAe,EAAE,CAAC,iBAAlB,eACE,oBAAC,OAAD,EAAS,IAAI,CAAC,iBAAd,oBADF,CAJF,CADF,cASE,oBAAC,GAAD,EAAK,SAAS,KAAd,EACGF,eAAe,eACZ,2BAA2B,oBAAC,OAAD,EAAS,OAAO,CAAEQ,YAAlB,WADf,cAEZ,qDACE,oBAAC,aAAD,EAAe,EAAE,CAAC,SAAlB,eACE,oBAAC,OAAD,EAAS,IAAI,CAAC,SAAd,WADF,CADF,cAIE,oBAAC,aAAD,EAAe,EAAE,CAAC,QAAlB,eACE,oBAAC,OAAD,EAAS,IAAI,CAAC,QAAd,UADF,CAJF,CAHN,CATF,CAPF,CADF,cAgCE,oBAAC,UAAD,CAAY,QAAZ,EAAqB,KAAK,CAAE,CAACR,eAAe,CAAfA,eAAD,CAAkBC,oBAAoB,CAApBA,oBAAlB,CAA5B,eACE,oBAAC,MAAD,MADF,CAhCF,CAFF,CAuCD,CAED,cAAeF,CAAAA,GAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport {Link, useHistory} from \"react-router-dom\";\nimport {Nav, Navbar, NavItem} from \"react-bootstrap\";\nimport {LinkContainer} from 'react-router-bootstrap';\nimport {Auth} from 'aws-amplify'\nimport Routes from \"./Routes\"\nimport {AppContext} from \"./libs/contextLib\";\nimport './App.css';\n\nfunction App() {\n  const [isAuthenticated, userHasAuthenticated] = useState(false);\n  const [isAuthenticating, setIsAuthenticating] = useState(true);\n\n  const history = useHistory();\n  \n\n  useEffect(() => {\n    onLoad();\n  }, []);\n\n  async function onLoad() {\n    try {\n      await Auth.currentSession();\n      userHasAuthenticated(true);\n    } catch (e) {\n      if (e !== 'No current user') {\n        alert(e);\n      }\n    }\n\n    setIsAuthenticating(false);\n  }\n\n  async function handleLogout() {\n    await Auth.signOut();\n\n    userHasAuthenticated(false);\n\n    history.push('/login');\n  }\n  return (\n    !isAuthenticating &&\n    <div className=\"App Container\">\n      <Navbar fluid collapseOnSelect>\n        <Navbar.Header>\n          <Navbar.Brand>\n            <Link to='/'>CSMIDB</Link>\n          </Navbar.Brand>\n          <Navbar.Toggle />\n        </Navbar.Header>\n        <Navbar.Collapse>\n          <Nav pullLeft>\n            <LinkContainer to='/image/upload'>\n              <NavItem href='/image/upload'>Upload Images</NavItem>\n            </LinkContainer>\n            <LinkContainer to='/image/download'>\n              <NavItem href='/image/download'>Download Images</NavItem>\n            </LinkContainer>\n          </Nav>\n          <Nav pullRight>\n            {isAuthenticated\n              ? /*add my uploads section */<NavItem onClick={handleLogout}>Logout</NavItem>\n              : <>\n                  <LinkContainer to='/signup'>\n                    <NavItem href='/signup'>Signup</NavItem>\n                  </LinkContainer>\n                  <LinkContainer to='/login'>\n                    <NavItem href='/login'>Login</NavItem>\n                  </LinkContainer>\n                </>\n            }\n          </Nav>\n        </Navbar.Collapse>\n      </Navbar>\n      <AppContext.Provider value={{isAuthenticated, userHasAuthenticated}}>\n        <Routes />\n      </AppContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}