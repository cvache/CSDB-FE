{"ast":null,"code":"import React, { useRef, useState } from \"react\";\nimport { API } from \"aws-amplify\";\nimport { useHistory } from \"react-router-dom\";\nimport { FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport { onError } from \"../libs/errorLib\";\nimport { s3Upload } from \"../libs/awsLib\";\nimport config from \"../config\";\nimport \"./NewNote.css\";\nexport default function NewNote() {\n  /*\n   const file = useRef(null);\n  const history = useHistory();\n  const [content, setContent] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  function validateForm() {\n  return content.length > 0;\n  }\n  function handleFileChange(event) {\n  file.current = event.target.files[0];\n  }\n  async function handleSubmit(event) {\n  event.preventDefault();\n   if (file.current && file.current.size > config.MAX_ATTACHMENT_SIZE) {\n    alert(\n      `Please pick a file smaller than ${\n        config.MAX_ATTACHMENT_SIZE / 1000000\n      } MB.`\n    );\n    return;\n  }\n   setIsLoading(true);\n   try {\n    const attachment = file.current ? await s3Upload(file.current) : null;\n     await createNote({ content, attachment });\n    history.push(\"/\");\n  } catch (e) {\n    onError(e);\n    setIsLoading(false);\n  }\n  }\n  function createNote(note) {\n  return API.post(\"notes\", \"/notes\", {\n    body: note\n  });\n  }\n  return (\n  <div className=\"NewNote\">\n    <form onSubmit={handleSubmit}>\n      <FormGroup controlId=\"content\">\n        <FormControl\n          value={content}\n          componentClass=\"textarea\"\n          onChange={e => setContent(e.target.value)}\n        />\n      </FormGroup>\n      <FormGroup controlId=\"file\">\n        <ControlLabel>Attachment</ControlLabel>\n        <FormControl onChange={handleFileChange} type=\"file\" />\n      </FormGroup>\n      <LoaderButton\n        block\n        type=\"submit\"\n        bsSize=\"large\"\n        bsStyle=\"primary\"\n        isLoading={isLoading}\n        disabled={!validateForm()}\n      >\n        Create\n      </LoaderButton>\n    </form>\n  </div>\n  );\n  */\n}","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/notes-front-end/src/containers/NewNote.js"],"names":["React","useRef","useState","API","useHistory","FormGroup","FormControl","ControlLabel","LoaderButton","onError","s3Upload","config","NewNote"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,QAAwC,OAAxC;AACA,SAASC,GAAT,QAAoB,aAApB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,SAAT,EAAoBC,WAApB,EAAiCC,YAAjC,QAAqD,iBAArD;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAO,eAAP;AAEA,eAAe,SAASC,OAAT,GAAmB;AAC9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEH","sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { API } from \"aws-amplify\";\nimport { useHistory } from \"react-router-dom\";\nimport { FormGroup, FormControl, ControlLabel } from \"react-bootstrap\";\nimport LoaderButton from \"../components/LoaderButton\";\nimport { onError } from \"../libs/errorLib\";\nimport { s3Upload } from \"../libs/awsLib\";\nimport config from \"../config\";\nimport \"./NewNote.css\";\n\nexport default function NewNote() {\n    /*\n  \n  const file = useRef(null);\n  const history = useHistory();\n  const [content, setContent] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  function validateForm() {\n    return content.length > 0;\n  }\n\n  function handleFileChange(event) {\n    file.current = event.target.files[0];\n  }\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    if (file.current && file.current.size > config.MAX_ATTACHMENT_SIZE) {\n      alert(\n        `Please pick a file smaller than ${\n          config.MAX_ATTACHMENT_SIZE / 1000000\n        } MB.`\n      );\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      const attachment = file.current ? await s3Upload(file.current) : null;\n\n      await createNote({ content, attachment });\n      history.push(\"/\");\n    } catch (e) {\n      onError(e);\n      setIsLoading(false);\n    }\n  }\n\n  function createNote(note) {\n    return API.post(\"notes\", \"/notes\", {\n      body: note\n    });\n  }\n  return (\n    <div className=\"NewNote\">\n      <form onSubmit={handleSubmit}>\n        <FormGroup controlId=\"content\">\n          <FormControl\n            value={content}\n            componentClass=\"textarea\"\n            onChange={e => setContent(e.target.value)}\n          />\n        </FormGroup>\n        <FormGroup controlId=\"file\">\n          <ControlLabel>Attachment</ControlLabel>\n          <FormControl onChange={handleFileChange} type=\"file\" />\n        </FormGroup>\n        <LoaderButton\n          block\n          type=\"submit\"\n          bsSize=\"large\"\n          bsStyle=\"primary\"\n          isLoading={isLoading}\n          disabled={!validateForm()}\n        >\n          Create\n        </LoaderButton>\n      </form>\n    </div>\n  );\n  */\n}"]},"metadata":{},"sourceType":"module"}