{"ast":null,"code":"import _regeneratorRuntime from\"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useAppContext}from\"../libs/contextLib\";import\"./DownloadImages.css\";import{onError}from'../libs/errorLib';import{API,Storage}from'aws-amplify';import ImageDisplay from'./ImageDisplay';export default function DownloadImages(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),images=_useState2[0],setImages=_useState2[1];var _useAppContext=useAppContext(),isAuthenticated=_useAppContext.isAuthenticated;var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];useEffect(function(){function onLoad(){return _onLoad.apply(this,arguments);}function _onLoad(){_onLoad=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _images;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(isAuthenticated){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;_context.next=5;return loadImages();case 5:_images=_context.sent;setImages(_images);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);onError(_context.t0);case 12:setIsLoading(false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return _onLoad.apply(this,arguments);}onLoad();},[isAuthenticated]);function loadImages(){return _loadImages.apply(this,arguments);}function _loadImages(){_loadImages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var images;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return API.get(\"notes\",\"/images\");case 2:images=_context3.sent;images.forEach(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(item){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Storage.get(item.imageName,{level:'public'});case 2:item.src=_context2.sent;case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}());console.log(images);return _context3.abrupt(\"return\",images);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return _loadImages.apply(this,arguments);}function renderList(){console.log(\"Rendering!\");return/*#__PURE__*/React.createElement(ImageDisplay,{images:images});}console.log(\"Att rendering of img list thru r\");console.log(images);return!isLoading&&renderList();}","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/DownloadImages.js"],"names":["React","useState","useEffect","useAppContext","onError","API","Storage","ImageDisplay","DownloadImages","images","setImages","isAuthenticated","isLoading","setIsLoading","onLoad","loadImages","get","forEach","item","imageName","level","src","console","log","renderList"],"mappings":"ijBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,aAAT,KAA8B,oBAA9B,CACA,MAAO,sBAAP,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,OAASC,GAAT,CAAcC,OAAd,KAA6B,aAA7B,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CAGA,cAAe,SAASC,CAAAA,cAAT,EAA0B,eACTP,QAAQ,CAAC,EAAD,CADC,wCAC9BQ,MAD8B,eACtBC,SADsB,kCAEXP,aAAa,EAFF,CAE9BQ,eAF8B,gBAE9BA,eAF8B,gBAGHV,QAAQ,CAAC,IAAD,CAHL,yCAG9BW,SAH8B,eAGnBC,YAHmB,eAKrCX,SAAS,CAAC,UAAM,SACGY,CAAAA,MADH,4HACZ,kJACQH,eADR,uGAM6BI,CAAAA,UAAU,EANvC,QAMcN,OANd,eAOQC,SAAS,CAACD,OAAD,CAAT,CAPR,+EASQL,OAAO,aAAP,CATR,QAYIS,YAAY,CAAC,KAAD,CAAZ,CAZJ,oEADY,yCAgBZC,MAAM,GACT,CAjBQ,CAiBN,CAACH,eAAD,CAjBM,CAAT,CALqC,QAwBtBI,CAAAA,UAxBsB,wIAwBrC,0KACyBV,CAAAA,GAAG,CAACW,GAAJ,CAAQ,OAAR,CAAiB,SAAjB,CADzB,QACUP,MADV,gBAEIA,MAAM,CAACQ,OAAP,0FAAe,kBAAMC,IAAN,6IACMZ,CAAAA,OAAO,CAACU,GAAR,CAAYE,IAAI,CAACC,SAAjB,CAA4B,CAAEC,KAAK,CAAE,QAAT,CAA5B,CADN,QACXF,IAAI,CAACG,GADM,wEAAf,gEAGAC,OAAO,CAACC,GAAR,CAAYd,MAAZ,EALJ,iCAOWA,MAPX,0DAxBqC,6CAkCrC,QAASe,CAAAA,UAAT,EAAsB,CAClBF,OAAO,CAACC,GAAR,CAAY,YAAZ,EACA,mBAAO,oBAAC,YAAD,EAAc,MAAM,CAAEd,MAAtB,EAAP,CACH,CAGDa,OAAO,CAACC,GAAR,CAAY,kCAAZ,EACAD,OAAO,CAACC,GAAR,CAAYd,MAAZ,EACA,MACI,CAACG,SAAD,EAAcY,UAAU,EAD5B,CAKH","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAppContext } from \"../libs/contextLib\";\nimport \"./DownloadImages.css\";\nimport { onError } from '../libs/errorLib';\nimport { API, Storage } from 'aws-amplify';\nimport ImageDisplay from './ImageDisplay';\n\n\nexport default function DownloadImages() {\n    const [images, setImages] = useState([]);\n    const {isAuthenticated} = useAppContext();\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        async function onLoad() {\n            if(!isAuthenticated) {\n                return;\n            }\n\n            try {\n                const images = await loadImages();\n                setImages(images);\n            } catch (e) {\n                onError(e);\n            }\n\n            setIsLoading(false);\n        }\n\n        onLoad();\n    }, [isAuthenticated]);\n\n    async function loadImages() {\n        const images = await API.get(\"notes\", \"/images\")\n        images.forEach(async item => {\n            item.src = await Storage.get(item.imageName, { level: 'public' });\n        });\n        console.log(images);\n\n        return images;\n    }\n\n    function renderList() {\n        console.log(\"Rendering!\");\n        return <ImageDisplay images={images} />\n    }\n    \n    \n    console.log(\"Att rendering of img list thru r\")\n    console.log(images);\n    return (\n        !isLoading && renderList()\n    );\n    \n\n}"]},"metadata":{},"sourceType":"module"}