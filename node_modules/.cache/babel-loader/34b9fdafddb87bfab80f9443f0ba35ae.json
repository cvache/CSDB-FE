{"ast":null,"code":"var _jsxFileName = \"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/DownloadImages.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useAppContext } from \"../libs/contextLib\";\nimport \"./DownloadImages.css\";\nimport { onError } from '../libs/errorLib';\nimport { API, Storage } from 'aws-amplify';\nimport ImageDisplay from './ImageDisplay';\nexport default function DownloadImages() {\n  const [images, setImages] = useState([]);\n  const {\n    isAuthenticated\n  } = useAppContext();\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    async function onLoad() {\n      if (!isAuthenticated) {\n        return;\n      }\n\n      try {\n        const images = await loadImages();\n        console.log(images);\n        setImages(images);\n      } catch (e) {\n        onError(e);\n      }\n\n      setIsLoading(false);\n    }\n\n    onLoad();\n  }, [isAuthenticated]);\n\n  async function loadImages() {\n    const images = await API.get(\"notes\", \"/images\");\n    images.forEach(async item => {\n      item.src = await Storage.get(item.imageName, {\n        level: 'public'\n      });\n    });\n    console.log(images);\n    return images;\n  }\n\n  function renderList() {\n    return /*#__PURE__*/React.createElement(ImageDisplay, {\n      images: images,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 16\n      }\n    });\n  }\n\n  console.log(images.length);\n  console.log(images);\n\n  if (images.length !== 0) {\n    return renderList();\n  } else {\n    return /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 16\n      }\n    }, \"No Images to display\");\n  }\n}","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/DownloadImages.js"],"names":["React","useState","useEffect","useAppContext","onError","API","Storage","ImageDisplay","DownloadImages","images","setImages","isAuthenticated","isLoading","setIsLoading","onLoad","loadImages","console","log","e","get","forEach","item","src","imageName","level","renderList","length"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,aAAT,QAA8B,oBAA9B;AACA,OAAO,sBAAP;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,GAAT,EAAcC,OAAd,QAA6B,aAA7B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAGA,eAAe,SAASC,cAAT,GAA0B;AACrC,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBT,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM;AAACU,IAAAA;AAAD,MAAoBR,aAAa,EAAvC;AACA,QAAM,CAACS,SAAD,EAAYC,YAAZ,IAA4BZ,QAAQ,CAAC,IAAD,CAA1C;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ,mBAAeY,MAAf,GAAwB;AACpB,UAAG,CAACH,eAAJ,EAAqB;AACjB;AACH;;AAED,UAAI;AACA,cAAMF,MAAM,GAAG,MAAMM,UAAU,EAA/B;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYR,MAAZ;AACAC,QAAAA,SAAS,CAACD,MAAD,CAAT;AACH,OAJD,CAIE,OAAOS,CAAP,EAAU;AACRd,QAAAA,OAAO,CAACc,CAAD,CAAP;AACH;;AAEDL,MAAAA,YAAY,CAAC,KAAD,CAAZ;AACH;;AAEDC,IAAAA,MAAM;AACT,GAlBQ,EAkBN,CAACH,eAAD,CAlBM,CAAT;;AAoBA,iBAAeI,UAAf,GAA4B;AACxB,UAAMN,MAAM,GAAG,MAAMJ,GAAG,CAACc,GAAJ,CAAQ,OAAR,EAAiB,SAAjB,CAArB;AACAV,IAAAA,MAAM,CAACW,OAAP,CAAe,MAAMC,IAAN,IAAc;AACzBA,MAAAA,IAAI,CAACC,GAAL,GAAW,MAAMhB,OAAO,CAACa,GAAR,CAAYE,IAAI,CAACE,SAAjB,EAA4B;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAA5B,CAAjB;AACH,KAFD;AAGAR,IAAAA,OAAO,CAACC,GAAR,CAAYR,MAAZ;AACA,WAAOA,MAAP;AACH;;AAED,WAASgB,UAAT,GAAsB;AAClB,wBAAO,oBAAC,YAAD;AAAc,MAAA,MAAM,EAAEhB,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACH;;AAEDO,EAAAA,OAAO,CAACC,GAAR,CAAYR,MAAM,CAACiB,MAAnB;AACAV,EAAAA,OAAO,CAACC,GAAR,CAAYR,MAAZ;;AACA,MAAIA,MAAM,CAACiB,MAAP,KAAkB,CAAtB,EAAyB;AACrB,WAAOD,UAAU,EAAjB;AACH,GAFD,MAEO;AACH,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAP;AACH;AAIJ","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAppContext } from \"../libs/contextLib\";\nimport \"./DownloadImages.css\";\nimport { onError } from '../libs/errorLib';\nimport { API, Storage } from 'aws-amplify';\nimport ImageDisplay from './ImageDisplay';\n\n\nexport default function DownloadImages() {\n    const [images, setImages] = useState([]);\n    const {isAuthenticated} = useAppContext();\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        async function onLoad() {\n            if(!isAuthenticated) {\n                return;\n            }\n\n            try {\n                const images = await loadImages();\n                console.log(images);\n                setImages(images);\n            } catch (e) {\n                onError(e);\n            }\n\n            setIsLoading(false);\n        }\n\n        onLoad();\n    }, [isAuthenticated]);\n\n    async function loadImages() {\n        const images = await API.get(\"notes\", \"/images\")\n        images.forEach(async item => {\n            item.src = await Storage.get(item.imageName, { level: 'public' });\n        });\n        console.log(images);\n        return images;\n    }\n\n    function renderList() {\n        return <ImageDisplay images={images} />\n    }\n\n    console.log(images.length);\n    console.log(images);\n    if (images.length !== 0) {\n        return renderList();\n    } else {\n        return <h2>No Images to display</h2>;\n    }\n    \n    \n\n}"]},"metadata":{},"sourceType":"module"}