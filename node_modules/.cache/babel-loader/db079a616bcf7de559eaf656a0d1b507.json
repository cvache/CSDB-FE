{"ast":null,"code":"import React, { useRef, useState, useEffect } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { API, Storage } from \"aws-amplify\";\nimport { onError } from \"../libs/errorLib\";\nexport default function Notes() {\n  const file = useRef(null);\n  const {\n    id\n  } = useParams();\n  const history = useHistory();\n  const [note, setNote] = useState(null);\n  const [content, setContent] = useState(\"\");\n  useEffect(() => {\n    function loadNote() {\n      return API.get(\"notes\", `/notes/${id}`);\n    }\n\n    async function onLoad() {\n      try {\n        const note = await loadNote();\n        const {\n          content,\n          attatchment\n        } = note;\n\n        if (attatchment) {\n          note.attatchmentURL = await Storage.vault.get(attatchment);\n        }\n\n        setContent(content);\n        setNote(note);\n      } catch (e) {\n        onError(e);\n      }\n    }\n\n    onLoad();\n  }, [id]);\n\n  function validateForm() {\n    return content.length > 0;\n  }\n\n  function formatFilename(str) {\n    return str.replace(/^\\w+-/, \"\");\n  }\n}","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/notes-front-end/src/containers/Notes.js"],"names":["React","useRef","useState","useEffect","useParams","useHistory","API","Storage","onError","Notes","file","id","history","note","setNote","content","setContent","loadNote","get","onLoad","attatchment","attatchmentURL","vault","e","validateForm","length","formatFilename","str","replace"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,kBAAtC;AACA,SAASC,GAAT,EAAcC,OAAd,QAA6B,aAA7B;AACA,SAASC,OAAT,QAAwB,kBAAxB;AAGA,eAAe,SAASC,KAAT,GAAiB;AAC5B,QAAMC,IAAI,GAAGT,MAAM,CAAC,IAAD,CAAnB;AACA,QAAM;AAACU,IAAAA;AAAD,MAAOP,SAAS,EAAtB;AACA,QAAMQ,OAAO,GAAGP,UAAU,EAA1B;AACA,QAAM,CAACQ,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAACa,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,EAAD,CAAtC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ,aAASc,QAAT,GAAoB;AAChB,aAAOX,GAAG,CAACY,GAAJ,CAAQ,OAAR,EAAkB,UAASP,EAAG,EAA9B,CAAP;AACH;;AAED,mBAAeQ,MAAf,GAAwB;AACpB,UAAI;AACA,cAAMN,IAAI,GAAG,MAAMI,QAAQ,EAA3B;AACA,cAAM;AAACF,UAAAA,OAAD;AAAUK,UAAAA;AAAV,YAAyBP,IAA/B;;AAEA,YAAIO,WAAJ,EAAiB;AACbP,UAAAA,IAAI,CAACQ,cAAL,GAAsB,MAAMd,OAAO,CAACe,KAAR,CAAcJ,GAAd,CAAkBE,WAAlB,CAA5B;AACH;;AAEDJ,QAAAA,UAAU,CAACD,OAAD,CAAV;AACAD,QAAAA,OAAO,CAACD,IAAD,CAAP;AACH,OAVD,CAUE,OAAOU,CAAP,EAAU;AACRf,QAAAA,OAAO,CAACe,CAAD,CAAP;AACH;AACJ;;AAEDJ,IAAAA,MAAM;AACT,GAtBQ,EAsBN,CAACR,EAAD,CAtBM,CAAT;;AAwBA,WAASa,YAAT,GAAwB;AACpB,WAAOT,OAAO,CAACU,MAAR,GAAiB,CAAxB;AACH;;AAED,WAASC,cAAT,CAAwBC,GAAxB,EAA6B;AACzB,WAAOA,GAAG,CAACC,OAAJ,CAAY,OAAZ,EAAqB,EAArB,CAAP;AACH;AACJ","sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { API, Storage } from \"aws-amplify\";\nimport { onError } from \"../libs/errorLib\";\n\n\nexport default function Notes() {\n    const file = useRef(null);\n    const {id} = useParams();\n    const history = useHistory();\n    const [note, setNote] = useState(null);\n    const [content, setContent] = useState(\"\");\n\n    useEffect(() => {\n        function loadNote() {\n            return API.get(\"notes\", `/notes/${id}`);\n        }\n\n        async function onLoad() {\n            try {\n                const note = await loadNote();\n                const {content, attatchment} = note;\n                \n                if (attatchment) {\n                    note.attatchmentURL = await Storage.vault.get(attatchment);\n                }\n\n                setContent(content);\n                setNote(note);\n            } catch (e) {\n                onError(e);\n            }\n        }\n\n        onLoad();\n    }, [id]);\n\n    function validateForm() {\n        return content.length > 0;\n    }\n\n    function formatFilename(str) {\n        return str.replace(/^\\w+-/, \"\")\n    }\n}"]},"metadata":{},"sourceType":"module"}