{"ast":null,"code":"var _jsxFileName = \"/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/Images.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Tabs, Tab, Image } from 'react-bootstrap';\nimport { API, Storage } from \"aws-amplify\";\nimport { onError } from \"../libs/errorLib\";\nimport TagTable from \"../components/TagTable\";\nimport MetadataTable from \"../components/MetadataTable\";\nimport CommentTab from \"../containers/CommentTab\";\nimport './Images.css';\nexport default function Images() {\n  const {\n    id\n  } = useParams();\n  const [image, setImage] = useState(null);\n  const [title, setTitle] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    function loadImage() {\n      return API.get(\"notes\", `/images/${id}`);\n    }\n\n    async function onLoad() {\n      try {\n        const image = await loadImage();\n        const {\n          title,\n          imgName\n        } = image;\n        image.attatchmentURL = await Storage.get(imgName, {\n          level: 'public'\n        });\n        setTitle(title);\n        setImage(image);\n      } catch (e) {\n        onError(e);\n      }\n    }\n\n    onLoad();\n    setIsLoading(false);\n  }, [id]);\n\n  if (image) {\n    console.log(image.tags);\n  }\n\n  function loadTabs() {\n    return /*#__PURE__*/React.createElement(Tabs, {\n      defaultActiveKey: \"Image\",\n      id: \"infoTabs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"Image\",\n      title: \"Image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: image ? image.attatchmentURL : '#',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"tags\",\n      title: \"Tags\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }\n    }, image ? /*#__PURE__*/React.createElement(TagTable, {\n      tags: image.tags,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 30\n      }\n    }) : \"Loading\"), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"metadata\",\n      title: \"Metadata\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }\n    }, image ? /*#__PURE__*/React.createElement(MetadataTable, {\n      items: image.metadata,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 30\n      }\n    }) : \"Loading\"), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"comments\",\n      title: \"Comments\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, image ? /*#__PURE__*/React.createElement(CommentTab, {\n      image: image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 30\n      }\n    }) : \"No Comments\"));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, title), !isLoading && loadTabs());\n}","map":{"version":3,"sources":["/Users/carsonvache/Documents/CrowdsourcedMedicalImageDatabase/Site/FE/src/containers/Images.js"],"names":["React","useState","useEffect","useParams","Tabs","Tab","Image","API","Storage","onError","TagTable","MetadataTable","CommentTab","Images","id","image","setImage","title","setTitle","isLoading","setIsLoading","loadImage","get","onLoad","imgName","attatchmentURL","level","e","console","log","tags","loadTabs","metadata"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Tabs, Tab, Image } from 'react-bootstrap';\nimport { API, Storage } from \"aws-amplify\";\nimport { onError } from \"../libs/errorLib\";\nimport TagTable from \"../components/TagTable\";\nimport MetadataTable from \"../components/MetadataTable\";\nimport CommentTab from \"../containers/CommentTab\";\nimport './Images.css';\n\n\nexport default function Images() {\n    const {id} = useParams();\n    const [image, setImage] = useState(null);\n    const [title, setTitle] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        \n        function loadImage() {\n            return API.get(\"notes\", `/images/${id}`);\n        }\n\n        async function onLoad() {\n            try {\n                const image = await loadImage();\n                const { title, imgName } = image;\n\n                image.attatchmentURL = await Storage.get(imgName, { level: 'public' });                \n\n                setTitle(title);\n                setImage(image);\n            } catch (e) {\n                onError(e);\n            }\n        }\n\n        onLoad();\n        setIsLoading(false);\n    }, [id]);   \n    \n    if(image){\n        console.log(image.tags);\n    }\n\n    function loadTabs() {\n        return (\n            <Tabs defaultActiveKey='Image' id='infoTabs'>\n                <Tab eventKey='Image' title='Image'>\n                    <Image src={image ? image.attatchmentURL : '#'}></Image>\n                </Tab>\n\n                <Tab eventKey='tags' title='Tags'>\n                    {image ? <TagTable tags={image.tags} /> : \"Loading\"}\n                </Tab>\n\n                <Tab eventKey='metadata' title='Metadata'>\n                    {image ? <MetadataTable items={image.metadata} /> : \"Loading\"}\n                </Tab>\n\n                <Tab eventKey='comments' title='Comments'>\n                    {image ? <CommentTab image={image} /> : \"No Comments\"}\n                </Tab>\n            </Tabs>\n        );       \n    }\n    \n\n    return (\n        <div className='Images'>\n            <h1>{title}</h1>\n            {!isLoading && loadTabs()}\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}